<?xml version="1.0"?>
<semantics:SemanticTheory xmlns:semantics="http://lang.whole.org/Semantics">
    <semantics:URI value="whole:org.whole.lang.xsd:XsdMappingLibrarySemantics"/>
    <semantics:Namespace value="org.whole.lang.xsd"/>
    <semantics:Name value="XsdMapping"/>
    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
    <semantics:SemanticFunctions initialCapacity="3">
        <semantics:SemanticFunction>
            <semantics:Name value="annotateXmlSchema"/>
            <semantics:FunctionType>
                <semantics:AnyType/>
                <semantics:AnyType/>
            </semantics:FunctionType>
            <queries:Scope xmlns:queries="http://lang.whole.org/Queries">
                <queries:ScopeNames initialCapacity="0"/>
                <queries:Block initialCapacity="61">
                    <queries:Filter>
                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                            <workflows:Text value="get any type entity name"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <workflows:StringLiteral value="org.whole.lang.xsd.util.SchemaUtils"/>
                            <workflows:StringLiteral value="getAnyTypeEntityName()"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </workflows:InvokeJavaClassMethod>
                        <queries:VariableTest value="ANY_TYPE_ENTITY_NAME"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:StringLiteral value="http://www.w3.org/2001/XMLSchema"/>
                        <queries:VariableTest value="XML_SCHEMA_NS_URI"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:FeatureStep value="targetNamespace"/>
                        <queries:VariableTest value="TARGET_NS_URI"/>
                    </queries:Filter>
                    <queries:PointwiseInsert>
                        <queries:Placement value="INTO"/>
                        <queries:FeatureStep value="namespaces"/>
                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                            <xsd:NamespaceDecl xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                <xsd:Name value="xml"/>
                                <xsd:AnyURI value="http://www.w3.org/XML/1998/namespace"/>
                            </xsd:NamespaceDecl>
                        </commons:StageUpFragment>
                    </queries:PointwiseInsert>
                    <queries:QueryDeclaration>
                        <queries:Name value="resolveNamespace"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="qname"/>
                            <queries:Name value="prefix"/>
                            <queries:Name value="uri"/>
                        </queries:Names>
                        <queries:Block initialCapacity="4">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:VariableTest value="self"/>
                            </queries:Filter>
                            <queries:If>
                                <queries:Not>
                                    <queries:Equals>
                                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="index of &quot;:&quot; in reference"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="indexOf(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:StringLiteral value=":"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <queries:IntLiteral value="-1"/>
                                    </queries:Equals>
                                </queries:Not>
                                <queries:Filter>
                                    <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get target prefix"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=":.+"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaInstanceMethod>
                                    <queries:VariableTest value="prefix"/>
                                </queries:Filter>
                            </queries:If>
                            <queries:Path initialCapacity="4">
                                <queries:RootStep/>
                                <queries:FeatureStep value="namespaces"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:If>
                                        <queries:Some>
                                        <queries:VariableRefStep value="prefix"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:Equals>
                                        <queries:VariableRefStep value="prefix"/>
                                        <queries:FeatureStep value="prefix"/>
                                        </queries:Equals>
                                        </queries:Filter>
                                    </queries:If>
                                    <queries:Do>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="prefix"/>
                                        <queries:TypeTest value="http://lang.whole.org/Commons#Resolver"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Filter>
                                    </queries:Do>
                                </queries:Choose>
                                <queries:Filter>
                                    <queries:FeatureStep value="uri"/>
                                    <queries:VariableTest value="uri"/>
                                </queries:Filter>
                            </queries:Path>
                            <queries:PointwiseUpdate>
                                <queries:SelfStep/>
                                <queries:Addition>
                                    <queries:VariableRefStep value="uri"/>
                                    <queries:Addition>
                                        <queries:StringLiteral value=":"/>
                                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get base name"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                    </queries:Addition>
                                </queries:Addition>
                            </queries:PointwiseUpdate>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="matchesUriInQName"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="uri"/>
                        </queries:Names>
                        <queries:Equals>
                            <queries:VariableRefStep value="uri"/>
                            <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                <workflows:Text value="get uri part"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <queries:SelfStep/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <workflows:StringLiteral value="java.lang.String"/>
                                <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                <workflows:Expressions initialCapacity="2">
                                    <workflows:StringLiteral value=":[^:]+$"/>
                                    <workflows:StringLiteral value=""/>
                                </workflows:Expressions>
                            </workflows:InvokeJavaInstanceMethod>
                        </queries:Equals>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isLocalQName"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Call>
                            <queries:Name value="matchesUriInQName"/>
                            <queries:Expressions initialCapacity="1">
                                <queries:VariableRefStep value="TARGET_NS_URI"/>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isSchemaQName"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="qname"/>
                            <queries:Name value="prefix"/>
                            <queries:Name value="uri"/>
                        </queries:Names>
                        <queries:Call>
                            <queries:Name value="matchesUriInQName"/>
                            <queries:Expressions initialCapacity="1">
                                <queries:VariableRefStep value="XML_SCHEMA_NS_URI"/>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isImportedQName"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="qname"/>
                            <queries:Name value="prefix"/>
                            <queries:Name value="uri"/>
                        </queries:Names>
                        <queries:Not>
                            <queries:Or initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="isLocalQName"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="isSchemaQName"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Or>
                        </queries:Not>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="toType"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="entity"/>
                            <queries:Name value="type"/>
                            <queries:Name value="ed"/>
                        </queries:Names>
                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                            <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                <workflows:Text value="sequence"/>
                                <workflows:FlowObjects initialCapacity="2">
                                    <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="convert type to entity descriptor"/>
                                        <workflows:Variable value="ed"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.commons.parsers.CommonsDataTypePersistenceParser"/>
                                        <workflows:StringLiteral value="getEntityDescriptor(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="type"/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaClassMethod>
                                    <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="convert entity"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.util.EntityUtils"/>
                                        <workflows:StringLiteral value="convertCloneIfParented(org.whole.lang.model.IEntity, org.whole.lang.reflect.EntityDescriptor)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="entity"/>
                                        <workflows:Variable value="ed"/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaClassMethod>
                                </workflows:FlowObjects>
                            </workflows:Sequence>
                        </commons:SameStageFragment>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getComponent"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="components"/>
                            <queries:Name value="name"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:Filter>
                                <queries:Call>
                                    <queries:Name value="toType"/>
                                    <queries:Expressions initialCapacity="2">
                                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get base name"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="XML_SCHEMA_NS_URI"/>
                                        <queries:StringLiteral value="#Name"/>
                                        </queries:Addition>
                                    </queries:Expressions>
                                </queries:Call>
                                <queries:VariableTest value="name"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="2">
                                <queries:RootStep/>
                                <queries:Filter>
                                    <queries:FeatureStep value="components"/>
                                    <queries:VariableTest value="components"/>
                                </queries:Filter>
                            </queries:Path>
                            <queries:Choose initialCapacity="5">
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupDef"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#TypeDef"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                            </queries:Choose>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getSimpleBaseType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="content"/>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="derivation"/>
                                    <queries:FeatureStep value="base"/>
                                </queries:Path>
                                <queries:FeatureStep value="base"/>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getComplexBaseType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Filter>
                                <queries:FeatureStep value="content"/>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                            </queries:Filter>
                            <queries:FeatureStep value="derivation"/>
                            <queries:FeatureStep value="base"/>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getBaseType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getComplexBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getSimpleBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAppInfo"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="annotated"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:VariableTest value="annotated"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="7">
                                <queries:VariableRefStep value="annotated"/>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#annotation"/>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#list"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Appinfo"/>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#source"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:AnyURI xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="http://lang.whole.org/Models"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:And>
                                </queries:Filter>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:SubtypeTest value="http://lang.whole.org/Commons#Fragment"/>
                                </queries:Filter>
                                <queries:Filter>
                                    <queries:FeatureStep value="http://lang.whole.org/Commons#rootEntity"/>
                                    <queries:LanguageTest value="http://lang.whole.org/Models"/>
                                </queries:Filter>
                            </queries:Path>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findAppInfo"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Choose initialCapacity="4">
                                <queries:Path initialCapacity="4">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:FeatureStep value="modelGroup"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="modelGroup"/>
                                </queries:Path>
                                <queries:SelfStep/>
                            </queries:Choose>
                            <queries:Call>
                                <queries:Name value="getAppInfo"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findAppInfoType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="findAppInfo"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Choose initialCapacity="2">
                                <queries:FeatureStep value="type"/>
                                <queries:SelfStep/>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findAppInfoFeature"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="findAppInfo"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="name"/>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="addAppInfo"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="contents"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:If>
                                <queries:Some>
                                    <queries:VariableRefStep value="contents"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                                <queries:PointwiseInsert>
                                    <queries:Placement value="INTO"/>
                                    <queries:Path initialCapacity="2">
                                        <queries:Choose initialCapacity="2">
                                        <queries:PointwiseUpdate>
                                        <queries:Filter>
                                        <queries:FeatureStep value="annotation"/>
                                        <queries:KindTest value="RESOLVER"/>
                                        </queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Annotation xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:AnnotationList initialCapacity="0"/>
                                        </xsd:Annotation>
                                        </commons:StageUpFragment>
                                        </queries:PointwiseUpdate>
                                        <queries:FeatureStep value="annotation"/>
                                        </queries:Choose>
                                        <queries:FeatureStep value="list"/>
                                    </queries:Path>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Appinfo xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:AnyURI value="http://lang.whole.org/Models"/>
                                        <xsd:AnnotationContents initialCapacity="1">
                                        <commons:SameStageFragment>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Commons#Any"/>
                                        <commons:VarName value="contents"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </commons:SameStageFragment>
                                        </xsd:AnnotationContents>
                                        </xsd:Appinfo>
                                    </commons:StageUpFragment>
                                </queries:PointwiseInsert>
                            </queries:If>
                            <queries:SelfStep/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getBuiltInEntityName"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="qname"/>
                            <queries:Name value="baseName"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:VariableTest value="qname"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="1">
                                <queries:Filter>
                                    <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get schema builtIn base name"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaInstanceMethod>
                                    <queries:VariableTest value="baseName"/>
                                </queries:Filter>
                            </queries:Path>
                            <queries:If>
                                <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                    <workflows:Text value="is builtIn type?"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                    <workflows:StringLiteral value="isBuiltIn(java.lang.String)"/>
                                    <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="baseName"/>
                                    </workflows:Expressions>
                                </workflows:InvokeJavaClassMethod>
                                <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                    <workflows:Text value="get all builtIn entity names"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <workflows:Variable value="builtInToEntityNameMap"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <workflows:StringLiteral value="java.util.Map"/>
                                    <workflows:StringLiteral value="get(java.lang.Object)"/>
                                    <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="baseName"/>
                                    </workflows:Expressions>
                                </workflows:InvokeJavaInstanceMethod>
                            </queries:If>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="3">
                            <queries:Filter>
                                <queries:FeatureStep value="simpleType"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="type"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="base"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getTypeDef"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="4">
                            <queries:Path initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getType"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getComponent"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                            <queries:Filter>
                                <queries:FeatureStep value="simpleTypeDef"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="typeDef"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="baseDef"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getModelGroupDef"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="ref"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="toFeatureName"/>
                        <queries:Names initialCapacity="4">
                            <queries:Name value="freshFeatureNameGen"/>
                            <queries:Name value="featureNameMap"/>
                            <queries:Name value="baseName"/>
                            <queries:Name value="freshName"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                    <workflows:Text value="sequence"/>
                                    <workflows:FlowObjects initialCapacity="3">
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="remove possible prefix from baseName"/>
                                        <workflows:Variable value="freshName"/>
                                        <workflows:Variable value="baseName"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="calculate feature name"/>
                                        <workflows:Variable value="freshName"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.util.SchemaHelpers"/>
                                        <workflows:StringLiteral value="toFreshFeatureName(org.whole.lang.util.FreshNameGenerator, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="freshFeatureNameGen"/>
                                        <workflows:Variable value="freshName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="update feature name map"/>
                                        <commons:Resolver/>
                                        <workflows:Variable value="featureNameMap"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.util.Map"/>
                                        <workflows:StringLiteral value="put(java.lang.Object, java.lang.Object)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="baseName"/>
                                        <workflows:Variable value="freshName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                    </workflows:FlowObjects>
                                </workflows:Sequence>
                            </commons:SameStageFragment>
                            <queries:VariableRefStep value="freshName"/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="toMappedType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="5">
                            <queries:Path initialCapacity="2">
                                <queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="isSchemaQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getBuiltInEntityName"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                            <queries:Path initialCapacity="3">
                                <queries:Call>
                                    <queries:Name value="getTypeDef"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getAppInfo"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Choose initialCapacity="2">
                                    <queries:FeatureStep value="name"/>
                                    <queries:SelfStep/>
                                </queries:Choose>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getModelGroupDef"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getAppInfo"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Any"/>
                                </queries:Filter>
                                <queries:VariableRefStep value="ANY_TYPE_ENTITY_NAME"/>
                            </queries:Path>
                            <queries:StringLiteral value="??? Unknown feature type name"/>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="setEntityNameAnnotation"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="freshEntityNameGen"/>
                            <queries:Name value="entityNameMap"/>
                        </queries:Names>
                        <queries:Block initialCapacity="4">
                            <queries:QueryDeclaration>
                                <queries:Name value="fromName"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="name"/>
                                        <queries:KindTest value="IMPL"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Filter>
                                        <queries:FeatureStep value="name"/>
                                    </queries:Path>
                                    <queries:Path initialCapacity="2">
                                        <queries:ParentStep/>
                                        <queries:Call>
                                        <queries:Name value="fromName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Choose>
                            </queries:QueryDeclaration>
                            <queries:QueryDeclaration>
                                <queries:Name value="toEntityName"/>
                                <queries:Names initialCapacity="2">
                                    <queries:Name value="baseName"/>
                                    <queries:Name value="freshName"/>
                                </queries:Names>
                                <queries:Block initialCapacity="3">
                                    <queries:Filter>
                                        <queries:Choose initialCapacity="5">
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:VariableRefStep value="baseName"/>
                                        </queries:If>
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="baseName"/>
                                        <queries:StringLiteral value="Type"/>
                                        </queries:Addition>
                                        </queries:If>
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Sequence"/>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#maxOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="1"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Not>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="baseName"/>
                                        <queries:StringLiteral value="List"/>
                                        </queries:Addition>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="baseName"/>
                                        <queries:StringLiteral value="Seq"/>
                                        </queries:Addition>
                                        </queries:Do>
                                        </queries:Choose>
                                        </queries:If>
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#All"/>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="baseName"/>
                                        <queries:StringLiteral value="Set"/>
                                        </queries:Addition>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:VariableRefStep value="baseName"/>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="freshName"/>
                                    </queries:Filter>
                                    <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="sequence"/>
                                        <workflows:FlowObjects initialCapacity="2">
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="calculate entity name"/>
                                        <workflows:Variable value="freshName"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.util.SchemaHelpers"/>
                                        <workflows:StringLiteral value="toFreshEntityName(org.whole.lang.util.FreshNameGenerator, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="freshEntityNameGen"/>
                                        <workflows:Variable value="freshName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="update entity name map"/>
                                        <commons:Resolver/>
                                        <workflows:Variable value="entityNameMap"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.util.Map"/>
                                        <workflows:StringLiteral value="put(java.lang.Object, java.lang.Object)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="baseName"/>
                                        <workflows:Variable value="freshName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        </workflows:FlowObjects>
                                        </workflows:Sequence>
                                    </commons:SameStageFragment>
                                    <queries:VariableRefStep value="freshName"/>
                                </queries:Block>
                            </queries:QueryDeclaration>
                            <queries:Call>
                                <queries:Name value="addAppInfo"/>
                                <queries:Expressions initialCapacity="1">
                                    <queries:Call>
                                        <queries:Name value="toType"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="toEntityName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:Call>
                                        <queries:Name value="fromName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:StringLiteral value="http://lang.whole.org/Models#SimpleName"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:Expressions>
                            </queries:Call>
                            <queries:SelfStep/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="setImportedEntityNameAnnotation"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="baseName"/>
                            <queries:Name value="freshEntityNameGen"/>
                            <queries:Name value="importedRefToEntityNameMap"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:QueryDeclaration>
                                <queries:Name value="toImportedEntityName"/>
                                <queries:Names initialCapacity="1">
                                    <queries:Name value="freshName"/>
                                </queries:Names>
                                <queries:Choose initialCapacity="2">
                                    <queries:If>
                                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="is mapped type"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:Variable value="importedRefToEntityNameMap"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.util.Map"/>
                                        <workflows:StringLiteral value="containsKey(java.lang.Object)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="baseName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get mapped type"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:Variable value="importedRefToEntityNameMap"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.util.Map"/>
                                        <workflows:StringLiteral value="get(java.lang.Object)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="baseName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                    </queries:If>
                                    <queries:Do>
                                        <queries:Block initialCapacity="2">
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="sequence"/>
                                        <workflows:FlowObjects initialCapacity="3">
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="remove possible prefix from baseName"/>
                                        <workflows:Variable value="freshName"/>
                                        <workflows:Variable value="freshName"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="calculate entity name"/>
                                        <workflows:Variable value="freshName"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.util.SchemaHelpers"/>
                                        <workflows:StringLiteral value="toFreshEntityName(org.whole.lang.util.FreshNameGenerator, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="freshEntityNameGen"/>
                                        <workflows:Variable value="freshName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="update entity name map"/>
                                        <commons:Resolver/>
                                        <workflows:Variable value="importedRefToEntityNameMap"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.util.Map"/>
                                        <workflows:StringLiteral value="put(java.lang.Object, java.lang.Object)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="baseName"/>
                                        <workflows:Variable value="freshName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        </workflows:FlowObjects>
                                        </workflows:Sequence>
                                        </commons:SameStageFragment>
                                        <queries:VariableRefStep value="freshName"/>
                                        </queries:Block>
                                    </queries:Do>
                                </queries:Choose>
                            </queries:QueryDeclaration>
                            <queries:Call>
                                <queries:Name value="addAppInfo"/>
                                <queries:Expressions initialCapacity="1">
                                    <queries:Call>
                                        <queries:Name value="toType"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="toImportedEntityName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:Addition>
                                        <queries:VariableRefStep value="baseName"/>
                                        <queries:StringLiteral value="Imported"/>
                                        </queries:Addition>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:StringLiteral value="http://lang.whole.org/Models#SimpleName"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:Expressions>
                            </queries:Call>
                            <queries:SelfStep/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="setFeatureAnnotation"/>
                        <queries:Names initialCapacity="7">
                            <queries:Name value="freshFeatureNameGen"/>
                            <queries:Name value="featureNameMap"/>
                            <queries:Name value="baseName"/>
                            <queries:Name value="name"/>
                            <queries:Name value="type"/>
                            <queries:Name value="baseType"/>
                            <queries:Name value="optional"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:Choose initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="updateWithFeatureAnnotation"/>
                                    <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="freshFeatureNameGen"/>
                                        <queries:VariableRefStep value="featureNameMap"/>
                                    </queries:Expressions>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="addAppInfo"/>
                                    <queries:Expressions initialCapacity="1">
                                        <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#FeatureModifier"/>
                                        <commons:VarName value="optional"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        </models:FeatureModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="type"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="toFeatureName"/>
                                        <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="freshFeatureNameGen"/>
                                        <queries:VariableRefStep value="featureNameMap"/>
                                        <queries:VariableRefStep value="baseName"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="toMappedType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="type"/>
                                        </queries:Filter>
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Choose initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#minOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#use"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Use xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="optional"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        </queries:Choose>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:FeatureModifier xmlns:models="http://lang.whole.org/Models" value="optional"/>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="optional"/>
                                        </queries:Filter>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:Choose>
                            <queries:SelfStep/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="updateWithEntityNameAnnotation"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:If>
                            <queries:Not>
                                <queries:Some>
                                    <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:TypeTest value="http://lang.whole.org/Models#SimpleName"/>
                                    </queries:Filter>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                            </queries:Not>
                            <queries:Call>
                                <queries:Name value="addAppInfo"/>
                                <queries:Expressions initialCapacity="1">
                                    <queries:Call>
                                        <queries:Name value="toType"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="toMappedType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:StringLiteral value="http://lang.whole.org/Models#SimpleName"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:Expressions>
                            </queries:Call>
                        </queries:If>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="updateWithFeatureAnnotation"/>
                        <queries:Names initialCapacity="6">
                            <queries:Name value="freshFeatureNameGen"/>
                            <queries:Name value="featureNameMap"/>
                            <queries:Name value="baseName"/>
                            <queries:Name value="name"/>
                            <queries:Name value="type"/>
                            <queries:Name value="optional"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:Filter>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                <queries:VariableTest value="baseName"/>
                            </queries:Filter>
                            <queries:If>
                                <queries:Some>
                                    <queries:Choose initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#minOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#use"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Use xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="optional"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                    </queries:Choose>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                                <queries:Filter>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:FeatureModifier xmlns:models="http://lang.whole.org/Models" value="optional"/>
                                    </commons:StageUpFragment>
                                    <queries:VariableTest value="optional"/>
                                </queries:Filter>
                            </queries:If>
                            <queries:CartesianUpdate>
                                <queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:TypeTest value="http://lang.whole.org/Models#SimpleName"/>
                                </queries:Filter>
                                <queries:Select>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#FeatureModifier"/>
                                        <commons:VarName value="modifiers"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:FeatureModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="type"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                    </commons:StageUpFragment>
                                    <queries:SelfStep/>
                                    <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="toFeatureName"/>
                                        <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="freshFeatureNameGen"/>
                                        <queries:VariableRefStep value="featureNameMap"/>
                                        <queries:Choose initialCapacity="2">
                                        <queries:VariableRefStep value="baseName"/>
                                        <queries:SelfStep/>
                                        </queries:Choose>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:VariableTest value="type"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:VariableRefStep value="optional"/>
                                        <queries:VariableTest value="modifiers"/>
                                        </queries:Filter>
                                    </queries:Sequence>
                                    <queries:TemplateNames/>
                                </queries:Select>
                            </queries:CartesianUpdate>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="updateWithDeclarationAnnotation"/>
                        <queries:Names initialCapacity="4">
                            <queries:Name value="name"/>
                            <queries:Name value="fnGen"/>
                            <queries:Name value="enumValue"/>
                            <queries:Name value="dataType"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:QueryDeclaration>
                                <queries:Name value="toDataType"/>
                                <queries:Names initialCapacity="1">
                                    <queries:Name value="baseName"/>
                                </queries:Names>
                                <queries:Block initialCapacity="2">
                                    <queries:QueryDeclaration>
                                        <queries:Name value="getBaseSimpleExtension"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleExtension"/>
                                        <queries:SelfStep/>
                                        </queries:If>
                                        <queries:Path initialCapacity="5">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                        <queries:KindTest value="IMPL"/>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:Call>
                                        <queries:Name value="getBaseSimpleExtension"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Choose>
                                    </queries:QueryDeclaration>
                                    <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="2">
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Path initialCapacity="1">
                                        <queries:Call>
                                        <queries:Name value="getBaseSimpleExtension"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:If>
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleTypeRestriction"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Path initialCapacity="1">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        </queries:Path>
                                        </queries:If>
                                        </queries:Choose>
                                        <queries:Choose initialCapacity="3">
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                        <queries:And initialCapacity="2">
                                        <queries:KindTest value="IMPL"/>
                                        <queries:Call>
                                        <queries:Name value="isSchemaQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:And>
                                        </queries:Filter>
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="sequence"/>
                                        <workflows:FlowObjects initialCapacity="2">
                                        <commons:SameStageFragment>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="get schema builtIn base name"/>
                                        <workflows:Variable value="baseName"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        </commons:SameStageFragment>
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="get data type"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="getDataType(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="baseName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        </workflows:FlowObjects>
                                        </workflows:Sequence>
                                        </commons:SameStageFragment>
                                        </queries:Path>
                                        <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                        <queries:KindTest value="IMPL"/>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="toDataType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#baseDef"/>
                                        <queries:Call>
                                        <queries:Name value="toDataType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Choose>
                                        </queries:Path>
                                        <queries:Do>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:DataType xmlns:models="http://lang.whole.org/Models" value="Unknown"/>
                                        </commons:StageUpFragment>
                                        </queries:Do>
                                    </queries:Choose>
                                </queries:Block>
                            </queries:QueryDeclaration>
                            <queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getAppInfo"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:And initialCapacity="2">
                                    <queries:TypeTest value="http://lang.whole.org/Models#SimpleName"/>
                                    <queries:VariableTest value="name"/>
                                </queries:And>
                            </queries:Filter>
                            <queries:PointwiseUpdate>
                                <queries:VariableRefStep value="name"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:EnumEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <models:EnumValues initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#EnumValue"/>
                                        <commons:VarName value="enumValue"/>
                                        <commons:Quantifier value="+"/>
                                        </commons:Variable>
                                        </models:EnumValues>
                                        </models:EnumEntity>
                                        </commons:StageUpFragment>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Or initialCapacity="2">
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleTypeDef"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="3">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Enumeration"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Enumeration"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        </queries:Or>
                                        </queries:Filter>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Filter>
                                        <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="create an enum value fresh name generator"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                        <workflows:StringLiteral value="FreshNameGenerator()"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </workflows:CreateJavaClassInstance>
                                        <queries:VariableTest value="fnGen"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="5">
                                        <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleTypeDef"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        </queries:Filter>
                                        </queries:Choose>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Enumeration"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#value"/>
                                        <queries:Filter>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="create a fresh enum value"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.util.SchemaHelpers"/>
                                        <workflows:StringLiteral value="toFreshEnumLiteralName(org.whole.lang.util.FreshNameGenerator, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="fnGen"/>
                                        <workflows:Variable value="self"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <queries:VariableTest value="enumValue"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:DataEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#DataType"/>
                                        <commons:VarName value="dataType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </models:DataEntity>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="toDataType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="dataType"/>
                                        </queries:Filter>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                </queries:Choose>
                            </queries:PointwiseUpdate>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getParticlesContainer"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:Path initialCapacity="2">
                                <queries:FeatureStep value="content"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="derivation"/>
                                        <queries:FeatureStep value="content"/>
                                    </queries:Path>
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#DeclaredContent"/>
                                    </queries:Filter>
                                </queries:Choose>
                            </queries:Path>
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                            </queries:Filter>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getDescendantParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Sequence initialCapacity="2">
                            <queries:SelfStep/>
                            <queries:If>
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupWithParticles"/>
                                <queries:Path initialCapacity="3">
                                    <queries:FeatureStep value="particles"/>
                                    <queries:ChildStep/>
                                    <queries:Call>
                                        <queries:Name value="getDescendantParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:If>
                        </queries:Sequence>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getParticlesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="modelGroup"/>
                            <queries:Call>
                                <queries:Name value="getDescendantParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getLocalParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#particles"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:Not>
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                                </queries:Not>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getReferencedParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#particles"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getModelGroupWithParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Filter>
                            <queries:Call>
                                <queries:Name value="getParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:And initialCapacity="2">
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupWithParticles"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:And>
                        </queries:Filter>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributesContainer"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="content"/>
                            <queries:Choose initialCapacity="3">
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="derivation"/>
                                    <queries:FeatureStep value="content"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="derivation"/>
                                </queries:Path>
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#DeclaredContent"/>
                                </queries:Filter>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributesGroupChildren"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="5">
                            <queries:FeatureStep value="ref"/>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="attributeUses"/>
                            <queries:ChildStep/>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAttributesGroupChildren"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:Not>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Not>
                                </queries:Filter>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getLocalAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="attributeUses"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseDecl"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getReferencedAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="4">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="attributeUses"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:Not>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseDecl"/>
                                </queries:Not>
                            </queries:Filter>
                            <queries:Choose initialCapacity="2">
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getAttributesGroupChildren"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getDeclaredAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Sequence initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getReferencedAttributes"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getLocalAttributes"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Sequence>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getInheritedAttributes"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="excluded"/>
                        </queries:Names>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getComplexBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getAttributes"/>
                                <queries:Expressions initialCapacity="1">
                                    <queries:VariableRefStep value="excluded"/>
                                </queries:Expressions>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributes"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="excluded"/>
                            <queries:Name value="declared"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:Filter>
                                <queries:Union>
                                    <queries:Expressions initialCapacity="0"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Union>
                                <queries:VariableTest value="excluded"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:Except>
                                    <queries:Expressions initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getDeclaredAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="excluded"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                    </queries:Expressions>
                                    <queries:IdentityComparator>
                                        <queries:FeatureStep value="name"/>
                                    </queries:IdentityComparator>
                                </queries:Except>
                                <queries:VariableTest value="declared"/>
                            </queries:Filter>
                            <queries:Sequence initialCapacity="2">
                                <queries:CartesianInsert>
                                    <queries:Placement value="INTO"/>
                                    <queries:VariableRefStep value="excluded"/>
                                    <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="declared"/>
                                        <queries:ChildStep/>
                                    </queries:Path>
                                </queries:CartesianInsert>
                                <queries:Call>
                                    <queries:Name value="getInheritedAttributes"/>
                                    <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="excluded"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:Sequence>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributesGroupWildcards"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:FeatureStep value="ref"/>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Sequence initialCapacity="2">
                                <queries:Filter>
                                    <queries:FeatureStep value="anyAttribute"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="3">
                                    <queries:FeatureStep value="attributeUses"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAttributesGroupWildcards"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Sequence>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getLocalWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Filter>
                                <queries:FeatureStep value="anyAttribute"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getDeclaredWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Sequence initialCapacity="2">
                                <queries:Filter>
                                    <queries:FeatureStep value="anyAttribute"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="3">
                                    <queries:FeatureStep value="attributeUses"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAttributesGroupWildcards"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Sequence>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getInheritedWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getComplexBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getWildcardAttribute"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Block initialCapacity="2">
                            <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                <text:Document xmlns:text="http://lang.whole.org/Text" initialCapacity="2">
                                    <text:Row initialCapacity="1">
                                        <text:Text value="1. Implement wildcard namespaceSpecs intersection/union algorithms"/>
                                    </text:Row>
                                    <text:Row initialCapacity="1">
                                        <text:Text value="(currently the first anyAttribute in hierarchy is returned)"/>
                                    </text:Row>
                                </text:Document>
                            </commons:StageUpFragment>
                            <queries:Filter>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="getDeclaredWildcardAttribute"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="getInheritedWildcardAttribute"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Sequence>
                                <queries:IndexTest>
                                    <queries:IntLiteral value="0"/>
                                </queries:IndexTest>
                            </queries:Filter>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="hasAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Some>
                            <queries:Sequence initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getAttributes"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getWildcardAttribute"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Sequence>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="hasRestriction"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Some>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                    </queries:Filter>
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                    </queries:Filter>
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexRestriction"/>
                                    </queries:Filter>
                                </queries:Path>
                            </queries:Choose>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="hasRestrictionWithFacets"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Some>
                            <queries:Path initialCapacity="2">
                                <queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                </queries:Filter>
                                <queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:And>
                                </queries:Filter>
                            </queries:Path>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                        <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                            <workflows:Text value="normalize schema and create a new fresh name generators"/>
                            <workflows:FlowObjects initialCapacity="13">
                                <workflows:InvokeOperation>
                                    <workflows:Text value="normalize schema"/>
                                    <workflows:Variable value="self"/>
                                    <workflows:Operation value="NORMALIZER"/>
                                    <commons:Resolver/>
                                </workflows:InvokeOperation>
                                <workflows:InvokeJavaClassMethod>
                                    <workflows:Text value="get builtIn to entity name map"/>
                                    <workflows:Variable value="builtInToEntityNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                    <workflows:StringLiteral value="getBuiltInToEntityNameMap()"/>
                                    <commons:Resolver/>
                                </workflows:InvokeJavaClassMethod>
                                <workflows:InvokeJavaClassMethod>
                                    <workflows:Text value="get builtIn to entity name map"/>
                                    <workflows:Variable value="reservedEntityNames"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="org.whole.lang.xsd.util.SchemaHelpers"/>
                                    <workflows:StringLiteral value="getReservedEntityNames()"/>
                                    <commons:Resolver/>
                                </workflows:InvokeJavaClassMethod>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create a fresh entity name generator"/>
                                    <workflows:Variable value="freshEntityNameGen"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                    <workflows:StringLiteral value="FreshNameGenerator(java.util.Collection)"/>
                                    <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="reservedEntityNames"/>
                                    </workflows:Expressions>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create an imported type to entity name map"/>
                                    <workflows:Variable value="importedTypeToEntityNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create an imported attribute to entity name map"/>
                                    <workflows:Variable value="importedAttributeToEntityNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create an imported element to entity name map"/>
                                    <workflows:Variable value="importedElementToEntityNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create an imported group to entity name map"/>
                                    <workflows:Variable value="importedGroupToEntityNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create a typeDef to entity name map"/>
                                    <workflows:Variable value="typeDefToEntityNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create a fresh feature name generator"/>
                                    <workflows:Variable value="freshFeatureNameGen"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                    <workflows:StringLiteral value="FreshNameGenerator()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create an attribute to feature name map"/>
                                    <workflows:Variable value="attributeToFeatureNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create an element to feature name map"/>
                                    <workflows:Variable value="elementToFeatureNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                                <workflows:CreateJavaClassInstance>
                                    <workflows:Text value="create model group to feature name map"/>
                                    <workflows:Variable value="modelGroupToFeatureNameMap"/>
                                    <commons:Resolver/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver/>
                                </workflows:CreateJavaClassInstance>
                            </workflows:FlowObjects>
                        </workflows:Sequence>
                    </commons:SameStageFragment>
                    <queries:Path initialCapacity="2">
                        <queries:Filter>
                            <queries:DescendantStep/>
                            <queries:And initialCapacity="2">
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#QName"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:And>
                        </queries:Filter>
                        <queries:Call>
                            <queries:Name value="resolveNamespace"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Call>
                    </queries:Path>
                    <queries:Path initialCapacity="3">
                        <queries:FeatureStep value="components"/>
                        <queries:Sequence initialCapacity="3">
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:And initialCapacity="2">
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#TypeDef"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:And>
                            </queries:Filter>
                            <queries:Path initialCapacity="2">
                                <queries:ChildStep/>
                                <queries:Filter>
                                    <queries:DescendantStep/>
                                    <queries:Or initialCapacity="2">
                                        <queries:And initialCapacity="2">
                                        <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#TypeDef"/>
                                        <queries:KindTest value="IMPL"/>
                                        </queries:And>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                    </queries:Or>
                                </queries:Filter>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:Sequence initialCapacity="2">
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        <queries:KindTest value="IMPL"/>
                                        </queries:And>
                                    </queries:Filter>
                                    <queries:Filter>
                                        <queries:DescendantStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexTypeDef"/>
                                        <queries:KindTest value="IMPL"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Sequence>
                                <queries:Call>
                                    <queries:Name value="getModelGroupWithParticles"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                        </queries:Sequence>
                        <queries:Call>
                            <queries:Name value="setEntityNameAnnotation"/>
                            <queries:Expressions initialCapacity="2">
                                <queries:VariableRefStep value="freshEntityNameGen"/>
                                <queries:VariableRefStep value="typeDefToEntityNameMap"/>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:Path>
                    <queries:Path initialCapacity="3">
                        <queries:FeatureStep value="components"/>
                        <queries:Filter>
                            <queries:DescendantStep/>
                            <queries:And initialCapacity="2">
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleTypeDef"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:And>
                        </queries:Filter>
                        <queries:Call>
                            <queries:Name value="updateWithDeclarationAnnotation"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Call>
                    </queries:Path>
                    <queries:Path initialCapacity="3">
                        <queries:FeatureStep value="components"/>
                        <queries:DescendantStep/>
                        <queries:Choose initialCapacity="3">
                            <queries:If>
                                <queries:And initialCapacity="3">
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                                    <queries:Not>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Not>
                                    <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:And>
                                <queries:Call>
                                    <queries:Name value="setImportedEntityNameAnnotation"/>
                                    <queries:Expressions initialCapacity="3">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                        <queries:VariableRefStep value="freshEntityNameGen"/>
                                        <queries:Choose initialCapacity="3">
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                        <queries:VariableRefStep value="importedAttributeToEntityNameMap"/>
                                        </queries:If>
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementRef"/>
                                        <queries:VariableRefStep value="importedElementToEntityNameMap"/>
                                        </queries:If>
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                                        <queries:VariableRefStep value="importedGroupToEntityNameMap"/>
                                        </queries:If>
                                        </queries:Choose>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:If>
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                    <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="type"/>
                                        <queries:And initialCapacity="2">
                                        <queries:KindTest value="IMPL"/>
                                        <queries:Call>
                                        <queries:Name value="isImportedQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:And>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:And>
                                <queries:Call>
                                    <queries:Name value="setImportedEntityNameAnnotation"/>
                                    <queries:Expressions initialCapacity="3">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#type"/>
                                        <queries:VariableRefStep value="freshEntityNameGen"/>
                                        <queries:VariableRefStep value="importedTypeToEntityNameMap"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:If>
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                    <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="simpleType"/>
                                        <queries:And initialCapacity="2">
                                        <queries:KindTest value="IMPL"/>
                                        <queries:Call>
                                        <queries:Name value="isImportedQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:And>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:And>
                                <queries:Call>
                                    <queries:Name value="setImportedEntityNameAnnotation"/>
                                    <queries:Expressions initialCapacity="3">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#simpleType"/>
                                        <queries:VariableRefStep value="freshEntityNameGen"/>
                                        <queries:VariableRefStep value="importedTypeToEntityNameMap"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:If>
                        </queries:Choose>
                    </queries:Path>
                    <queries:Path initialCapacity="3">
                        <queries:FeatureStep value="components"/>
                        <queries:Sequence initialCapacity="2">
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:And initialCapacity="2">
                                    <queries:Or initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                    </queries:Or>
                                    <queries:KindTest value="IMPL"/>
                                </queries:And>
                            </queries:Filter>
                            <queries:Path initialCapacity="3">
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupDef"/>
                                </queries:Filter>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#attributeUses"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:Not>
                                        <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                                    </queries:Not>
                                </queries:Filter>
                            </queries:Path>
                        </queries:Sequence>
                        <queries:Call>
                            <queries:Name value="setFeatureAnnotation"/>
                            <queries:Expressions initialCapacity="3">
                                <queries:VariableRefStep value="freshFeatureNameGen"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                        <queries:VariableRefStep value="elementToFeatureNameMap"/>
                                    </queries:If>
                                    <queries:Do>
                                        <queries:VariableRefStep value="attributeToFeatureNameMap"/>
                                    </queries:Do>
                                </queries:Choose>
                                <queries:Choose initialCapacity="2">
                                    <queries:FeatureStep value="name"/>
                                    <queries:FeatureStep value="ref"/>
                                </queries:Choose>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:Path>
                    <queries:Path initialCapacity="2">
                        <queries:FeatureStep value="components"/>
                        <queries:Path initialCapacity="3">
                            <queries:Sequence initialCapacity="2">
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        <queries:KindTest value="IMPL"/>
                                    </queries:And>
                                </queries:Filter>
                                <queries:Filter>
                                    <queries:DescendantStep/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexTypeDef"/>
                                        <queries:KindTest value="IMPL"/>
                                    </queries:And>
                                </queries:Filter>
                            </queries:Sequence>
                            <queries:Call>
                                <queries:Name value="getModelGroupWithParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Sequence initialCapacity="6">
                                <queries:Filter>
                                    <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="create a local fresh feature name generator"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                        <workflows:StringLiteral value="FreshNameGenerator()"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </workflows:CreateJavaClassInstance>
                                    <queries:VariableTest value="localFreshFeatureNameGen"/>
                                </queries:Filter>
                                <queries:Filter>
                                    <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="create a local element to feature name map"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.util.HashMap"/>
                                        <workflows:StringLiteral value="HashMap()"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </workflows:CreateJavaClassInstance>
                                    <queries:VariableTest value="localElementToFeatureNameMap"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="getReferencedParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="4">
                                        <queries:FeatureStep value="ref"/>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="getAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="bind feature name to local fresh name generator"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:Variable value="localFreshFeatureNameGen"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                        <workflows:StringLiteral value="addBoundName(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <queries:FeatureStep value="name"/>
                                        </commons:SameStageFragment>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        </queries:Path>
                                        <queries:Call>
                                        <queries:Name value="updateWithFeatureAnnotation"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="localFreshFeatureNameGen"/>
                                        <queries:VariableRefStep value="localElementToFeatureNameMap"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Choose>
                                </queries:Path>
                                <queries:Choose initialCapacity="2">
                                    <queries:If>
                                        <queries:Or initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                                        <queries:And initialCapacity="2">
                                        <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#maxOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="1"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Not>
                                        <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Not>
                                        </queries:And>
                                        </queries:Or>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getLocalParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="updateWithEntityNameAnnotation"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                    </queries:If>
                                    <queries:Do>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getLocalParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="setFeatureAnnotation"/>
                                        <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="localFreshFeatureNameGen"/>
                                        <queries:VariableRefStep value="localElementToFeatureNameMap"/>
                                        <queries:Choose initialCapacity="3">
                                        <queries:FeatureStep value="name"/>
                                        <queries:FeatureStep value="ref"/>
                                        <queries:StringLiteral value="any"/>
                                        </queries:Choose>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Path>
                                    </queries:Do>
                                </queries:Choose>
                                <queries:If>
                                    <queries:Or initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#maxOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="1"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Or>
                                    <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getReferencedParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="updateWithFeatureAnnotation"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="localFreshFeatureNameGen"/>
                                        <queries:VariableRefStep value="localElementToFeatureNameMap"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:If>
                                <queries:If>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Particles"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                    <queries:Call>
                                        <queries:Name value="updateWithFeatureAnnotation"/>
                                        <queries:Expressions initialCapacity="2">
                                        <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="create a local fresh feature name generator"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                        <workflows:StringLiteral value="FreshNameGenerator()"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </workflows:CreateJavaClassInstance>
                                        <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="create a local element to feature name map"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="java.util.HashMap"/>
                                        <workflows:StringLiteral value="HashMap()"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </workflows:CreateJavaClassInstance>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:If>
                            </queries:Sequence>
                        </queries:Path>
                    </queries:Path>
                    <queries:Path initialCapacity="3">
                        <queries:FeatureStep value="components"/>
                        <queries:Sequence initialCapacity="2">
                            <queries:Filter>
                                <queries:DescendantStep/>
                                <queries:And initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexTypeDef"/>
                                    <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="hasRestriction"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Not>
                                </queries:And>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:DescendantStep/>
                                <queries:And initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexTypeDef"/>
                                    <queries:Call>
                                        <queries:Name value="hasRestrictionWithFacets"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:And>
                            </queries:Filter>
                        </queries:Sequence>
                        <queries:Sequence initialCapacity="6">
                            <queries:Filter>
                                <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                    <workflows:Text value="create a local fresh feature name generator"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                    <workflows:StringLiteral value="FreshNameGenerator()"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </workflows:CreateJavaClassInstance>
                                <queries:VariableTest value="localFreshFeatureNameGen"/>
                            </queries:Filter>
                            <queries:Filter>
                                <workflows:CreateJavaClassInstance xmlns:workflows="http://lang.whole.org/Workflows">
                                    <workflows:Text value="create a local attribute to feature name map"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    <workflows:StringLiteral value="java.util.HashMap"/>
                                    <workflows:StringLiteral value="HashMap()"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </workflows:CreateJavaClassInstance>
                                <queries:VariableTest value="localAttributeToFeatureNameMap"/>
                            </queries:Filter>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                    <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Call>
                                        <queries:Name value="updateWithDeclarationAnnotation"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:Call>
                                        <queries:Name value="setFeatureAnnotation"/>
                                        <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="localFreshFeatureNameGen"/>
                                        <queries:VariableRefStep value="localAttributeToFeatureNameMap"/>
                                        <queries:StringLiteral value="content"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Do>
                                    </queries:Choose>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Call>
                                        <queries:Name value="getParticlesContainer"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="bind feature name to local fresh name generator"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:Variable value="localFreshFeatureNameGen"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                        <workflows:StringLiteral value="addBoundName(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="self"/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaInstanceMethod>
                                </queries:Path>
                            </queries:Choose>
                            <queries:Path initialCapacity="3">
                                <queries:Call>
                                    <queries:Name value="getReferencedAttributes"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Filter>
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Filter>
                                <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                    <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="bind all referenced attribute names"/>
                                        <workflows:FlowObjects initialCapacity="3">
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="get base name from reference"/>
                                        <workflows:Variable value="attributeName"/>
                                        <queries:SelfStep/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.lang.String"/>
                                        <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:StringLiteral value=".+:"/>
                                        <workflows:StringLiteral value=""/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="get mapped feature name"/>
                                        <workflows:Variable value="boundName"/>
                                        <workflows:Variable value="attributeToFeatureNameMap"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="java.util.Map"/>
                                        <workflows:StringLiteral value="get(java.lang.Object)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="attributeName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="bind feature name to local fresh name generator"/>
                                        <commons:Resolver/>
                                        <workflows:Variable value="localFreshFeatureNameGen"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.util.FreshNameGenerator"/>
                                        <workflows:StringLiteral value="addBoundName(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="boundName"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        </workflows:FlowObjects>
                                    </workflows:Sequence>
                                </commons:SameStageFragment>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getLocalAttributes"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="setFeatureAnnotation"/>
                                    <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="localFreshFeatureNameGen"/>
                                        <queries:VariableRefStep value="localAttributeToFeatureNameMap"/>
                                        <queries:FeatureStep value="name"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getReferencedAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="ref"/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="setFeatureAnnotation"/>
                                    <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="localFreshFeatureNameGen"/>
                                        <queries:VariableRefStep value="localAttributeToFeatureNameMap"/>
                                        <queries:FeatureStep value="ref"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:Path>
                        </queries:Sequence>
                    </queries:Path>
                    <queries:SelfStep/>
                </queries:Block>
            </queries:Scope>
        </semantics:SemanticFunction>
        <semantics:SemanticFunction>
            <semantics:Name value="annotatedXmlSchemaToModelsAndMapping"/>
            <semantics:FunctionType>
                <semantics:AnyType/>
                <semantics:AnyType/>
            </semantics:FunctionType>
            <queries:Scope xmlns:queries="http://lang.whole.org/Queries">
                <queries:ScopeNames initialCapacity="2">
                    <queries:Name value="fileName"/>
                    <queries:Name value="fileLocationURI"/>
                </queries:ScopeNames>
                <queries:Block initialCapacity="67">
                    <queries:Filter>
                        <queries:StringLiteral value="http://www.w3.org/2001/XMLSchema"/>
                        <queries:VariableTest value="XML_SCHEMA_NS_URI"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Choose initialCapacity="2">
                            <queries:Filter>
                                <queries:FeatureStep value="targetNamespace"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:StringLiteral value=""/>
                        </queries:Choose>
                        <queries:VariableTest value="TARGET_NS_URI"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Union>
                            <queries:Expressions initialCapacity="0"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Union>
                        <queries:VariableTest value="mappedBuiltInTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Union>
                            <queries:Expressions initialCapacity="0"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Union>
                        <queries:VariableTest value="mappedCustomDataTypes"/>
                    </queries:Filter>
                    <queries:QueryDeclaration>
                        <queries:Name value="getUriPart"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                            <workflows:Text value="get uri part"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <workflows:Variable value="self"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <workflows:StringLiteral value="java.lang.String"/>
                            <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                            <workflows:Expressions initialCapacity="2">
                                <workflows:StringLiteral value=":[^:]+$"/>
                                <workflows:StringLiteral value=""/>
                            </workflows:Expressions>
                        </workflows:InvokeJavaInstanceMethod>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getBasePart"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <workflows:InvokeJavaInstanceMethod xmlns:workflows="http://lang.whole.org/Workflows">
                            <workflows:Text value="get base part"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <workflows:Variable value="self"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <workflows:StringLiteral value="java.lang.String"/>
                            <workflows:StringLiteral value="replaceFirst(java.lang.String, java.lang.String)"/>
                            <workflows:Expressions initialCapacity="2">
                                <workflows:StringLiteral value=".+:"/>
                                <workflows:StringLiteral value=""/>
                            </workflows:Expressions>
                        </workflows:InvokeJavaInstanceMethod>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="matchesUriInQName"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="uri"/>
                        </queries:Names>
                        <queries:Equals>
                            <queries:Call>
                                <queries:Name value="getUriPart"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:VariableRefStep value="uri"/>
                        </queries:Equals>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isLocalQName"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Call>
                            <queries:Name value="matchesUriInQName"/>
                            <queries:Expressions initialCapacity="1">
                                <queries:VariableRefStep value="TARGET_NS_URI"/>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isSchemaQName"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Call>
                            <queries:Name value="matchesUriInQName"/>
                            <queries:Expressions initialCapacity="1">
                                <queries:VariableRefStep value="XML_SCHEMA_NS_URI"/>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isImportedQName"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Not>
                            <queries:Or initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="isLocalQName"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="isSchemaQName"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Or>
                        </queries:Not>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="toType"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="entity"/>
                            <queries:Name value="type"/>
                            <queries:Name value="ed"/>
                        </queries:Names>
                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                            <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                <workflows:Text value="sequence"/>
                                <workflows:FlowObjects initialCapacity="2">
                                    <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="convert type to entity descriptor"/>
                                        <workflows:Variable value="ed"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.commons.parsers.CommonsDataTypePersistenceParser"/>
                                        <workflows:StringLiteral value="getEntityDescriptor(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="type"/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaClassMethod>
                                    <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="convert entity"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.util.EntityUtils"/>
                                        <workflows:StringLiteral value="convertCloneIfParented(org.whole.lang.model.IEntity, org.whole.lang.reflect.EntityDescriptor)"/>
                                        <workflows:Expressions initialCapacity="2">
                                        <workflows:Variable value="entity"/>
                                        <workflows:Variable value="ed"/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaClassMethod>
                                </workflows:FlowObjects>
                            </workflows:Sequence>
                        </commons:SameStageFragment>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="addBuiltInModelDeclatration"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="entityType"/>
                            <queries:Name value="builtInType"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:QueryDeclaration>
                                <queries:Name value="createBuiltInModelDeclaration"/>
                                <queries:Names initialCapacity="3">
                                    <queries:Name value="builtInComponentType"/>
                                    <queries:Name value="componentType"/>
                                    <queries:Name value="dataType"/>
                                </queries:Names>
                                <queries:Choose initialCapacity="2">
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:CompositeEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <models:ComponentModifiers initialCapacity="1">
                                        <models:ComponentModifier value="ordered"/>
                                        </models:ComponentModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#Type"/>
                                        <commons:VarName value="componentType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </models:CompositeEntity>
                                        </commons:StageUpFragment>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="is list derived?"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="isListDerived(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="builtInType"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        </queries:Filter>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Filter>
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="calculate component type"/>
                                        <workflows:FlowObjects initialCapacity="2">
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="get built in component type"/>
                                        <workflows:Variable value="builtInComponentType"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="getBuiltInComponentType(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="builtInType"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="get component type"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="getEntityNameFromBuiltIn(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="builtInComponentType"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        </workflows:FlowObjects>
                                        </workflows:Sequence>
                                        </commons:SameStageFragment>
                                        <queries:VariableTest value="componentType"/>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="addBuiltInModelDeclatration"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="componentType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:DataEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#DataType"/>
                                        <commons:VarName value="dataType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </models:DataEntity>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Filter>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get data type"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="getDataType(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="builtInType"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <queries:VariableTest value="dataType"/>
                                        </queries:Filter>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                </queries:Choose>
                            </queries:QueryDeclaration>
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="is schema built in?"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="isBuiltInEntityName(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="entityType"/>
                                        </workflows:Expressions>
                                    </workflows:InvokeJavaClassMethod>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="mappedBuiltInTypes"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="name"/>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                </queries:And>
                                <queries:Block initialCapacity="4">
                                    <queries:Filter>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get built in type"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="getBuiltInFromEntityName(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="entityType"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <queries:VariableTest value="builtInType"/>
                                    </queries:Filter>
                                    <queries:PointwiseInsert>
                                        <queries:Placement value="INTO"/>
                                        <queries:VariableRefStep value="mappedBuiltInTypes"/>
                                        <queries:Call>
                                        <queries:Name value="createBuiltInModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:PointwiseInsert>
                                    <queries:PointwiseInsert>
                                        <queries:Placement value="INTO"/>
                                        <queries:VariableRefStep value="mappedCustomDataTypes"/>
                                        <queries:Call>
                                        <queries:Name value="getCustomDataType"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="entityType"/>
                                        <queries:VariableRefStep value="builtInType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:PointwiseInsert>
                                    <queries:SelfStep/>
                                </queries:Block>
                            </queries:If>
                            <queries:SelfStep/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getCustomDataType"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="entityType"/>
                            <queries:Name value="builtInType"/>
                        </queries:Names>
                        <queries:If>
                            <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                <workflows:Text value="has custom data type?"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                <workflows:StringLiteral value="hasCustomDataType(java.lang.String)"/>
                                <workflows:Expressions initialCapacity="1">
                                    <workflows:Variable value="builtInType"/>
                                </workflows:Expressions>
                            </workflows:InvokeJavaClassMethod>
                            <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                <mapping:CustomDataType xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                    <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                    </commons:Variable>
                                    <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#BuiltInType"/>
                                        <commons:VarName value="builtInType"/>
                                        <commons:Quantifier value="!"/>
                                    </commons:Variable>
                                </mapping:CustomDataType>
                            </commons:StageUpFragment>
                        </queries:If>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getName"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Choose initialCapacity="3">
                                <queries:If>
                                    <queries:Or initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#QName"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Name"/>
                                    </queries:Or>
                                    <queries:SelfStep/>
                                </queries:If>
                                <queries:If>
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                </queries:If>
                                <queries:Do>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                </queries:Do>
                            </queries:Choose>
                            <queries:Choose initialCapacity="2">
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#QName"/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                    </queries:And>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getBasePart"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getComponent"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="uri"/>
                            <queries:Name value="components"/>
                            <queries:Name value="name"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:Path initialCapacity="2">
                                <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                    <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="retrive target schmea"/>
                                        <workflows:FlowObjects initialCapacity="2">
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="get XsdRegistry instance"/>
                                        <workflows:Variable value="schemaRegistry"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.resources.XsdRegistry"/>
                                        <workflows:StringLiteral value="instance()"/>
                                        <commons:Resolver/>
                                        </workflows:InvokeJavaClassMethod>
                                        <workflows:InvokeJavaInstanceMethod>
                                        <workflows:Text value="get xml schema"/>
                                        <commons:Resolver/>
                                        <workflows:Variable value="schemaRegistry"/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.resources.XsdRegistry"/>
                                        <workflows:StringLiteral value="getSchemaFor(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <commons:SameStageFragment>
                                        <queries:Call>
                                        <queries:Name value="getUriPart"/>
                                        <commons:Resolver/>
                                        </queries:Call>
                                        </commons:SameStageFragment>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaInstanceMethod>
                                        </workflows:FlowObjects>
                                    </workflows:Sequence>
                                </commons:SameStageFragment>
                                <queries:Filter>
                                    <queries:FeatureStep value="components"/>
                                    <queries:VariableTest value="components"/>
                                </queries:Filter>
                            </queries:Path>
                            <queries:Filter>
                                <queries:Call>
                                    <queries:Name value="toType"/>
                                    <queries:Expressions initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getBasePart"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="XML_SCHEMA_NS_URI"/>
                                        <queries:StringLiteral value="#Name"/>
                                        </queries:Addition>
                                    </queries:Expressions>
                                </queries:Call>
                                <queries:VariableTest value="name"/>
                            </queries:Filter>
                            <queries:Choose initialCapacity="5">
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupDef"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                                    </queries:Filter>
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="components"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#TypeDef"/>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                            </queries:Choose>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getSuperSimpleExtension"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleExtension"/>
                                <queries:SelfStep/>
                            </queries:If>
                            <queries:Path initialCapacity="5">
                                <queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getComponent"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                <queries:Call>
                                    <queries:Name value="getSuperSimpleExtension"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getSimpleBaseType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:Path initialCapacity="2">
                                <queries:FeatureStep value="content"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="derivation"/>
                                        <queries:FeatureStep value="base"/>
                                    </queries:Path>
                                    <queries:FeatureStep value="base"/>
                                </queries:Choose>
                            </queries:Path>
                            <queries:Path initialCapacity="3">
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:And>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getSuperSimpleExtension"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:FeatureStep value="base"/>
                            </queries:Path>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getBaseType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Block initialCapacity="2">
                            <queries:QueryDeclaration>
                                <queries:Name value="getComplexBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:FeatureStep value="content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="derivation"/>
                                    <queries:FeatureStep value="base"/>
                                </queries:Path>
                            </queries:QueryDeclaration>
                            <queries:Choose initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getComplexBaseType"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getSimpleBaseType"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Choose>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getExtensionBaseDataType"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="extension"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:VariableTest value="extension"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="2">
                                <queries:FeatureStep value="base"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:If>
                                        <queries:Call>
                                        <queries:Name value="isSchemaQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableRefStep value="extension"/>
                                    </queries:If>
                                    <queries:Path initialCapacity="3">
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:FeatureStep value="content"/>
                                        <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="derivation"/>
                                        <queries:Call>
                                        <queries:Name value="getExtensionBaseDataType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:VariableRefStep value="extension"/>
                                        </queries:Choose>
                                    </queries:Path>
                                </queries:Choose>
                            </queries:Path>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getBuiltInType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getSimpleBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Choose initialCapacity="2">
                                <queries:If>
                                    <queries:Call>
                                        <queries:Name value="isSchemaQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="getBasePart"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:If>
                                <queries:Path initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="getBuiltInType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAppInfo"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="annotated"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:VariableTest value="annotated"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="7">
                                <queries:VariableRefStep value="annotated"/>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#annotation"/>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#list"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Appinfo"/>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#source"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:AnyURI xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="http://lang.whole.org/Models"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:And>
                                </queries:Filter>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:SubtypeTest value="http://lang.whole.org/Commons#Fragment"/>
                                </queries:Filter>
                                <queries:Filter>
                                    <queries:FeatureStep value="http://lang.whole.org/Commons#rootEntity"/>
                                    <queries:LanguageTest value="http://lang.whole.org/Models"/>
                                </queries:Filter>
                            </queries:Path>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findAppInfo"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Choose initialCapacity="4">
                                <queries:Path initialCapacity="4">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:FeatureStep value="modelGroup"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="modelGroup"/>
                                </queries:Path>
                                <queries:SelfStep/>
                            </queries:Choose>
                            <queries:Call>
                                <queries:Name value="getAppInfo"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findAppInfoFeature"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="findAppInfo"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="name"/>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findAppInfoType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="findAppInfo"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Choose initialCapacity="2">
                                <queries:If>
                                    <queries:TypeTest value="http://lang.whole.org/Models#Feature"/>
                                    <queries:FeatureStep value="type"/>
                                </queries:If>
                                <queries:SelfStep/>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="findImportedAppInfoType"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="prefix"/>
                            <queries:Name value="uri"/>
                            <queries:Name value="schemaRegistry"/>
                        </queries:Names>
                        <queries:Addition>
                            <queries:Call>
                                <queries:Name value="getUriPart"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Addition>
                                <queries:StringLiteral value="#"/>
                                <queries:Singleton>
                                    <queries:Path initialCapacity="3">
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="getAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Choose initialCapacity="2">
                                        <queries:FeatureStep value="name"/>
                                        <queries:SelfStep/>
                                        </queries:Choose>
                                    </queries:Path>
                                </queries:Singleton>
                            </queries:Addition>
                        </queries:Addition>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="addAppInfo"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="contents"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:If>
                                <queries:Some>
                                    <queries:VariableRefStep value="contents"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                                <queries:PointwiseInsert>
                                    <queries:Placement value="INTO"/>
                                    <queries:Path initialCapacity="2">
                                        <queries:Choose initialCapacity="2">
                                        <queries:PointwiseUpdate>
                                        <queries:Filter>
                                        <queries:FeatureStep value="annotation"/>
                                        <queries:TypeTest value="http://lang.whole.org/Commons#Resolver"/>
                                        </queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Annotation xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:AnnotationList initialCapacity="0"/>
                                        </xsd:Annotation>
                                        </commons:StageUpFragment>
                                        </queries:PointwiseUpdate>
                                        <queries:FeatureStep value="annotation"/>
                                        </queries:Choose>
                                        <queries:FeatureStep value="list"/>
                                    </queries:Path>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Appinfo xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:AnnotationContents initialCapacity="1">
                                        <commons:SameStageFragment>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Commons#Any"/>
                                        <commons:VarName value="contents"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </commons:SameStageFragment>
                                        </xsd:AnnotationContents>
                                        </xsd:Appinfo>
                                    </commons:StageUpFragment>
                                </queries:PointwiseInsert>
                            </queries:If>
                            <queries:SelfStep/>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="cloneMappings"/>
                        <queries:Names initialCapacity="6">
                            <queries:Name value="targetContextType"/>
                            <queries:Name value="sourceRef"/>
                            <queries:Name value="sourceContextType"/>
                            <queries:Name value="clonedMapping"/>
                            <queries:Name value="strategyRegistry"/>
                            <queries:Name value="lk"/>
                        </queries:Names>
                        <queries:Choose initialCapacity="2">
                            <queries:If>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="sourceRef"/>
                                    <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Path initialCapacity="3">
                                        <queries:VariableRefStep value="sourceRef"/>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="sourceContextType"/>
                                        </queries:Filter>
                                    </queries:Path>
                                    <queries:For>
                                        <queries:Path initialCapacity="3">
                                        <queries:VariableRefStep value="mappingStrategy"/>
                                        <queries:FeatureStep value="http://xsd.lang.whole.org/Mapping#mappings"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:SubtypeTest value="http://xsd.lang.whole.org/Mapping#ContextMapping"/>
                                        <queries:Equals>
                                        <queries:FeatureStep value="http://xsd.lang.whole.org/Mapping#contextEntityType"/>
                                        <queries:VariableRefStep value="sourceContextType"/>
                                        </queries:Equals>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="clone mapping"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.util.EntityUtils"/>
                                        <workflows:StringLiteral value="clone(org.whole.lang.model.IEntity)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <workflows:Variable value="self"/>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <queries:VariableTest value="clonedMapping"/>
                                        </queries:Filter>
                                        <queries:PointwiseUpdate>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="clonedMapping"/>
                                        <queries:FeatureStep value="http://xsd.lang.whole.org/Mapping#contextEntityType"/>
                                        </queries:Path>
                                        <queries:VariableRefStep value="targetContextType"/>
                                        </queries:PointwiseUpdate>
                                        <queries:PointwiseInsert>
                                        <queries:Placement value="INTO"/>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="mappingStrategy"/>
                                        <queries:FeatureStep value="http://xsd.lang.whole.org/Mapping#mappings"/>
                                        </queries:Path>
                                        <queries:VariableRefStep value="clonedMapping"/>
                                        </queries:PointwiseInsert>
                                        </queries:Sequence>
                                    </queries:For>
                                </queries:Sequence>
                            </queries:If>
                            <queries:Do>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Do>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:Filter>
                                <queries:FeatureStep value="simpleType"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="type"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getTypeDef"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="3">
                            <queries:Path initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getType"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getComponent"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                            <queries:Filter>
                                <queries:FeatureStep value="simpleTypeDef"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="typeDef"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getParticlesContainer"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:Filter>
                                <queries:SelfStep/>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="2">
                                <queries:FeatureStep value="content"/>
                                <queries:Choose initialCapacity="2">
                                    <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="derivation"/>
                                        <queries:FeatureStep value="content"/>
                                    </queries:Path>
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#DeclaredContent"/>
                                    </queries:Filter>
                                </queries:Choose>
                            </queries:Path>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getDescendantParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="1">
                            <queries:Sequence initialCapacity="2">
                                <queries:SelfStep/>
                                <queries:If>
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupWithParticles"/>
                                    <queries:Path initialCapacity="3">
                                        <queries:FeatureStep value="particles"/>
                                        <queries:ChildStep/>
                                        <queries:Call>
                                        <queries:Name value="getDescendantParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:If>
                            </queries:Sequence>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getComponentParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getParticlesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#modelGroup"/>
                            <queries:Call>
                                <queries:Name value="getDescendantParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getComponentChildParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getParticlesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#modelGroup"/>
                            <queries:Call>
                                <queries:Name value="getChildParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getChildParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#particles"/>
                            <queries:ChildStep/>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getLocalParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#particles"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:Not>
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                                </queries:Not>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getReferencedParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#particles"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getComponentModelGroupWithParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Filter>
                            <queries:Call>
                                <queries:Name value="getComponentParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:And initialCapacity="2">
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupWithParticles"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:And>
                        </queries:Filter>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getBaseParticles"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Sequence initialCapacity="2">
                            <queries:Path initialCapacity="5">
                                <queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                </queries:Filter>
                                <queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexExtension"/>
                                </queries:Filter>
                                <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                <queries:Call>
                                    <queries:Name value="getComponent"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getBaseParticles"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getParticlesContainer"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#modelGroup"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:Filter>
                            </queries:Path>
                        </queries:Sequence>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributesContainer"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:FeatureStep value="content"/>
                            <queries:Choose initialCapacity="3">
                                <queries:Path initialCapacity="3">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="derivation"/>
                                    <queries:FeatureStep value="content"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="derivation"/>
                                </queries:Path>
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#DeclaredContent"/>
                                </queries:Filter>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributesGroupChildren"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="5">
                            <queries:FeatureStep value="ref"/>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="attributeUses"/>
                            <queries:ChildStep/>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAttributesGroupChildren"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:Not>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Not>
                                </queries:Filter>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getLocalAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="attributeUses"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseDecl"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getReferencedAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="4">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:FeatureStep value="attributeUses"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:Not>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseDecl"/>
                                </queries:Not>
                            </queries:Filter>
                            <queries:Choose initialCapacity="2">
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                </queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getAttributesGroupChildren"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getDeclaredAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Sequence initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getReferencedAttributes"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getLocalAttributes"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Sequence>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getInheritedAttributes"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="excluded"/>
                        </queries:Names>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getAttributes"/>
                                <queries:Expressions initialCapacity="1">
                                    <queries:VariableRefStep value="excluded"/>
                                </queries:Expressions>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributes"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="excluded"/>
                            <queries:Name value="declared"/>
                        </queries:Names>
                        <queries:Block initialCapacity="3">
                            <queries:Filter>
                                <queries:Union>
                                    <queries:Expressions initialCapacity="0"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Union>
                                <queries:VariableTest value="excluded"/>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:Except>
                                    <queries:Expressions initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getDeclaredAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="excluded"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                    </queries:Expressions>
                                    <queries:IdentityComparator>
                                        <queries:FeatureStep value="name"/>
                                    </queries:IdentityComparator>
                                </queries:Except>
                                <queries:VariableTest value="declared"/>
                            </queries:Filter>
                            <queries:Sequence initialCapacity="2">
                                <queries:CartesianInsert>
                                    <queries:Placement value="INTO"/>
                                    <queries:VariableRefStep value="excluded"/>
                                    <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="declared"/>
                                        <queries:ChildStep/>
                                    </queries:Path>
                                </queries:CartesianInsert>
                                <queries:Call>
                                    <queries:Name value="getInheritedAttributes"/>
                                    <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="excluded"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:Sequence>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getAttributesGroupWildcards"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:FeatureStep value="ref"/>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Sequence initialCapacity="2">
                                <queries:Filter>
                                    <queries:FeatureStep value="anyAttribute"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="3">
                                    <queries:FeatureStep value="attributeUses"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAttributesGroupWildcards"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Sequence>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getLocalWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Filter>
                                <queries:FeatureStep value="anyAttribute"/>
                                <queries:KindTest value="IMPL"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getDeclaredWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getAttributesContainer"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Sequence initialCapacity="2">
                                <queries:Filter>
                                    <queries:FeatureStep value="anyAttribute"/>
                                    <queries:KindTest value="IMPL"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="3">
                                    <queries:FeatureStep value="attributeUses"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                    </queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getAttributesGroupWildcards"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Sequence>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getInheritedWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="3">
                            <queries:Call>
                                <queries:Name value="getBaseType"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getComponent"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Call>
                                <queries:Name value="getWildcardAttribute"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="getWildcardAttribute"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Block initialCapacity="2">
                            <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                <text:Document xmlns:text="http://lang.whole.org/Text" initialCapacity="2">
                                    <text:Row initialCapacity="1">
                                        <text:Text value="1. Implement wildcard namespaceSpecs intersection/union algorithms"/>
                                    </text:Row>
                                    <text:Row initialCapacity="1">
                                        <text:Text value="(currently the first anyAttribute in hierarchy is returned)"/>
                                    </text:Row>
                                </text:Document>
                            </commons:StageUpFragment>
                            <queries:Filter>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="getDeclaredWildcardAttribute"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="getInheritedWildcardAttribute"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Sequence>
                                <queries:IndexTest>
                                    <queries:IntLiteral value="0"/>
                                </queries:IndexTest>
                            </queries:Filter>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="hasAttributes"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Some>
                            <queries:Sequence initialCapacity="2">
                                <queries:Call>
                                    <queries:Name value="getAttributes"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="getWildcardAttribute"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:Sequence>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="needsFeatureDeclarations"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Some>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                    </queries:Filter>
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Not>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Not>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexContent"/>
                                    </queries:Filter>
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexRestriction"/>
                                    </queries:Filter>
                                </queries:Path>
                            </queries:Choose>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isChoiceModelGroupDef"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:And initialCapacity="2">
                            <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                            <queries:Some>
                                <queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getComponentModelGroupWithParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:And initialCapacity="2">
                                        <queries:IndexTest>
                                        <queries:IntLiteral value="0"/>
                                        </queries:IndexTest>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                                    </queries:And>
                                </queries:Filter>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Some>
                        </queries:And>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isChoiceModelGroupRef"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Some>
                            <queries:Path initialCapacity="3">
                                <queries:Filter>
                                    <queries:SelfStep/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupRef"/>
                                </queries:Filter>
                                <queries:FeatureStep value="ref"/>
                                <queries:Filter>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="isChoiceModelGroupDef"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Filter>
                            </queries:Path>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="asImportedType"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Filter>
                            <queries:Choose initialCapacity="3">
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#type"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                    </queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#simpleType"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#Reference"/>
                                        <queries:Not>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeGroupRef"/>
                                        </queries:Not>
                                        </queries:And>
                                    </queries:Filter>
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                </queries:Path>
                            </queries:Choose>
                            <queries:And initialCapacity="2">
                                <queries:KindTest value="IMPL"/>
                                <queries:Call>
                                    <queries:Name value="isImportedQName"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                            </queries:And>
                        </queries:Filter>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="allChoiceSubstitutions"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Call>
                                <queries:Name value="getChildParticles"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                            <queries:Choose initialCapacity="2">
                                <queries:Path initialCapacity="4">
                                    <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Call>
                                        <queries:Name value="isChoiceModelGroupRef"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Filter>
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="allChoiceModelGroupDefSubstitutions"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:SelfStep/>
                            </queries:Choose>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="allChoiceModelGroupDefSubstitutions"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Path initialCapacity="2">
                            <queries:Filter>
                                <queries:Call>
                                    <queries:Name value="getComponentModelGroupWithParticles"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:IndexTest>
                                    <queries:IntLiteral value="0"/>
                                </queries:IndexTest>
                            </queries:Filter>
                            <queries:Call>
                                <queries:Name value="allChoiceSubstitutions"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            </queries:Call>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="mapsToCompositeEntity"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:If>
                                <queries:And initialCapacity="3">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Sequence"/>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#maxOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="1"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                </queries:And>
                                <queries:BooleanLiteral value="true"/>
                            </queries:If>
                            <queries:Do>
                                <queries:BooleanLiteral value="false"/>
                            </queries:Do>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="mapToModelDeclaration"/>
                        <queries:Names initialCapacity="7">
                            <queries:Name value="eType"/>
                            <queries:Name value="cType"/>
                            <queries:Name value="features"/>
                            <queries:Name value="fName"/>
                            <queries:Name value="fType"/>
                            <queries:Name value="fModifier"/>
                            <queries:Name value="attributeFeatures"/>
                        </queries:Names>
                        <queries:Choose initialCapacity="7">
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                <queries:Block initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="addBuiltInModelDeclatration"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Expressions>
                                    </queries:Call>
                                    <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#typeDef"/>
                                        <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                <queries:Block initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="addBuiltInModelDeclatration"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Expressions>
                                    </queries:Call>
                                    <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#simpleTypeDef"/>
                                        <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexTypeDef"/>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Path initialCapacity="2">
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getParticlesContainer"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#modelGroup"/>
                                        </queries:Path>
                                        <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="needsFeatureDeclarations"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getDeclaredAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Not>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                        </queries:Not>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:Sequence>
                                        <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:SimpleEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="eType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <models:Features initialCapacity="2">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#Feature"/>
                                        <commons:VarName value="attributeFeatures"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#Feature"/>
                                        <commons:VarName value="features"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:Features>
                                        </models:SimpleEntity>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="eType"/>
                                        </queries:Filter>
                                        <queries:Choose initialCapacity="3">
                                        <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="features"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleExtension"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fType"/>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="addBuiltInModelDeclatration"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="fType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fName"/>
                                        </queries:Filter>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="features"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="findAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="fType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getSuperSimpleExtension"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fName"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#FeatureModifier"/>
                                        <commons:VarName value="fModifier"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:FeatureModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="features"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="1">
                                        <queries:Call>
                                        <queries:Name value="getBaseParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fType"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fName"/>
                                        </queries:Filter>
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#minOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:FeatureModifier xmlns:models="http://lang.whole.org/Models" value="optional"/>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="fModifier"/>
                                        </queries:Filter>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        </queries:Choose>
                                        <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#FeatureModifier"/>
                                        <commons:VarName value="fModifier"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:FeatureModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="attributeFeatures"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="needsFeatureDeclarations"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getDeclaredAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Path initialCapacity="2">
                                        <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:SelfStep/>
                                        </queries:Choose>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fType"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fName"/>
                                        </queries:Filter>
                                        </queries:Sequence>
                                        </queries:Path>
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#use"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Use xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="optional"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:FeatureModifier xmlns:models="http://lang.whole.org/Models" value="optional"/>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="fModifier"/>
                                        </queries:Filter>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                </queries:Sequence>
                            </queries:If>
                            <queries:If>
                                <queries:Or initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Sequence"/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#All"/>
                                </queries:Or>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                    <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:Call>
                                        <queries:Name value="mapsToCompositeEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:CompositeEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="eType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <models:ComponentModifiers initialCapacity="1">
                                        <models:ComponentModifier value="ordered"/>
                                        </models:ComponentModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="cType"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        </models:CompositeEntity>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="eType"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="cType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        </queries:If>
                                        <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:SimpleEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="eType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <models:Features initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#Feature"/>
                                        <commons:VarName value="features"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:Features>
                                        </models:SimpleEntity>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="eType"/>
                                        </queries:Filter>
                                        <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:Feature xmlns:models="http://lang.whole.org/Models">
                                        <models:FeatureModifiers initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#FeatureModifier"/>
                                        <commons:VarName value="fModifier"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:FeatureModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </models:Feature>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="features"/>
                                        </queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fType"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="fName"/>
                                        </queries:Filter>
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#minOccurs"/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Bounded xmlns:xsd="http://www.w3.org/2001/XMLSchema" value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:FeatureModifier xmlns:models="http://lang.whole.org/Models" value="optional"/>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="fModifier"/>
                                        </queries:Filter>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                    </queries:Choose>
                                </queries:Sequence>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:SimpleEntity xmlns:models="http://lang.whole.org/Models">
                                        <models:EntityModifiers initialCapacity="1">
                                        <models:EntityModifier value="abstract"/>
                                        </models:EntityModifiers>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="eType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:Types initialCapacity="0"/>
                                        <models:Features initialCapacity="0"/>
                                        </models:SimpleEntity>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="eType"/>
                                        </queries:Filter>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Sequence>
                            </queries:If>
                            <queries:If>
                                <queries:Or initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleTypeDef"/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                </queries:Or>
                                <queries:Block initialCapacity="2">
                                    <queries:PointwiseInsert>
                                        <queries:Placement value="INTO"/>
                                        <queries:VariableRefStep value="mappedCustomDataTypes"/>
                                        <queries:Call>
                                        <queries:Name value="mapToDataType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:PointwiseInsert>
                                    <queries:Call>
                                        <queries:Name value="findAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ModelGroupDef"/>
                                <queries:Path initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="getComponentChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:If>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="mapToMapping"/>
                        <queries:Names initialCapacity="8">
                            <queries:Name value="contextStack"/>
                            <queries:Name value="ncname"/>
                            <queries:Name value="entityType"/>
                            <queries:Name value="newContextStack"/>
                            <queries:Name value="context"/>
                            <queries:Name value="previousContext"/>
                            <queries:Name value="contextEntityType"/>
                            <queries:Name value="featureType"/>
                        </queries:Names>
                        <queries:Choose initialCapacity="12">
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Path initialCapacity="1">
                                        <queries:VariableRefStep value="contextStack"/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                </queries:And>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:RootMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#NCName"/>
                                        <commons:VarName value="ncname"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:RootMapping>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="name"/>
                                        <queries:VariableTest value="ncname"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#typeDef"/>
                                        <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Sequence>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ComplexTypeDef"/>
                                <queries:Block initialCapacity="2">
                                    <queries:Filter>
                                        <queries:Union>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:SelfStep/>
                                        </queries:Expressions>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Union>
                                        <queries:VariableTest value="newContextStack"/>
                                    </queries:Filter>
                                    <queries:Path initialCapacity="2">
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="1">
                                        <queries:Call>
                                        <queries:Name value="getBaseParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleContent"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#derivation"/>
                                        <queries:Or initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleExtension"/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        </queries:Or>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:Choose>
                                        <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="needsFeatureDeclarations"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <queries:Sequence initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getInheritedAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="getDeclaredAttributes"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Sequence>
                                        <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="3">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#AttributeUseRef"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#ref"/>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:SelfStep/>
                                        </queries:Choose>
                                        </queries:Path>
                                        </queries:Sequence>
                                        <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="newContextStack"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:Or initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementRef"/>
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#ElementDecl"/>
                                </queries:Or>
                                <queries:Block initialCapacity="2">
                                    <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="ncname"/>
                                    </queries:Filter>
                                    <queries:Sequence initialCapacity="3">
                                        <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:StructuralMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#NCName"/>
                                        <commons:VarName value="ncname"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        </mapping:StructuralMapping>
                                        </commons:StageUpFragment>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:PointwiseProduct initialCapacity="2">
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="previousContext"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexRangeTest>
                                        <queries:IntLiteral value="1"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:IndexRangeTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:PointwiseProduct>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="previousContext"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:If>
                                        <queries:Not>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Call>
                                        <queries:Name value="mapsToCompositeEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Not>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="previousContext"/>
                                        <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:ParentStep/>
                                        <queries:Filter>
                                        <queries:ParentStep/>
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Call>
                                        <queries:Name value="mapsToCompositeEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:And>
                                        <queries:Path initialCapacity="3">
                                        <queries:ParentStep/>
                                        <queries:ParentStep/>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:ElementMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#NCName"/>
                                        <commons:VarName value="ncname"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        </mapping:ElementMapping>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="4">
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexTest>
                                        <queries:IntLiteral value="0"/>
                                        </queries:IndexTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:Choose initialCapacity="3">
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:VariableRefStep value="ncname"/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#QName"/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isLocalQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:And>
                                        </queries:Filter>
                                        <queries:Addition>
                                        <queries:Call>
                                        <queries:Name value="getUriPart"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Addition>
                                        <queries:StringLiteral value="#"/>
                                        <queries:Singleton>
                                        <queries:Path initialCapacity="3">
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="getAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:FeatureStep value="type"/>
                                        </queries:Path>
                                        </queries:Singleton>
                                        </queries:Addition>
                                        </queries:Addition>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="asImportedType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="findImportedAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Choose>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        <queries:If>
                                        <queries:Not>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Call>
                                        <queries:Name value="mapsToCompositeEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Not>
                                        <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Path initialCapacity="3">
                                        <queries:ParentStep/>
                                        <queries:ParentStep/>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Choose>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                        </queries:Select>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#typeDef"/>
                                        <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                    </queries:Sequence>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Any"/>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:AnyStructuralMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        </mapping:AnyStructuralMapping>
                                        </commons:StageUpFragment>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:PointwiseProduct initialCapacity="2">
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="previousContext"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexRangeTest>
                                        <queries:IntLiteral value="1"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:IndexRangeTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:PointwiseProduct>
                                        </queries:Path>
                                        <queries:Sequence initialCapacity="3">
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="previousContext"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:If>
                                        <queries:Not>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Call>
                                        <queries:Name value="mapsToCompositeEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Not>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="previousContext"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Select>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:AnyElementMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        </mapping:AnyElementMapping>
                                        </commons:StageUpFragment>
                                        <queries:SelfStep/>
                                        <queries:Sequence initialCapacity="4">
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexTest>
                                        <queries:IntLiteral value="0"/>
                                        </queries:IndexTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        <queries:If>
                                        <queries:Not>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Call>
                                        <queries:Name value="mapsToCompositeEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Path>
                                        </queries:Not>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                        </queries:If>
                                        </queries:Sequence>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                </queries:Sequence>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleExtension"/>
                                <queries:Select>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:ContentMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:ContentMapping>
                                    </commons:StageUpFragment>
                                    <queries:SelfStep/>
                                    <queries:Sequence initialCapacity="4">
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexTest>
                                        <queries:IntLiteral value="0"/>
                                        </queries:IndexTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getExtensionBaseDataType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                    </queries:Sequence>
                                    <queries:TemplateNames/>
                                </queries:Select>
                            </queries:If>
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                    <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:And>
                                <queries:Select>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:ContentMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:ContentMapping>
                                    </commons:StageUpFragment>
                                    <queries:SelfStep/>
                                    <queries:Sequence initialCapacity="4">
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexTest>
                                        <queries:IntLiteral value="0"/>
                                        </queries:IndexTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="findAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getSuperSimpleExtension"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                    </queries:Sequence>
                                    <queries:TemplateNames/>
                                </queries:Select>
                            </queries:If>
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#AttributeDecl"/>
                                    <queries:Some>
                                        <queries:Path initialCapacity="1">
                                        <queries:VariableRefStep value="contextStack"/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:And>
                                <queries:Select>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:AttributeMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="contextEntityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#NCName"/>
                                        <commons:VarName value="ncname"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:AttributeMapping>
                                    </commons:StageUpFragment>
                                    <queries:SelfStep/>
                                    <queries:Sequence initialCapacity="5">
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="ncname"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexTest>
                                        <queries:IntLiteral value="0"/>
                                        </queries:IndexTest>
                                        <queries:VariableTest value="context"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="contextEntityType"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoFeature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                    </queries:Sequence>
                                    <queries:TemplateNames/>
                                </queries:Select>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Sequence"/>
                                <queries:Block initialCapacity="2">
                                    <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Union>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:SelfStep/>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        </queries:Expressions>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Union>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:VariableRefStep value="contextStack"/>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="newContextStack"/>
                                    </queries:Filter>
                                    <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="newContextStack"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#All"/>
                                <queries:Block initialCapacity="2">
                                    <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:Some>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Union>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:SelfStep/>
                                        <queries:Path initialCapacity="2">
                                        <queries:VariableRefStep value="contextStack"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        </queries:Expressions>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Union>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:VariableRefStep value="contextStack"/>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="newContextStack"/>
                                    </queries:Filter>
                                    <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="getChildParticles"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="newContextStack"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Block>
                            </queries:If>
                            <queries:If>
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                                <queries:Path initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="allChoiceSubstitutions"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="contextStack"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:Path>
                            </queries:If>
                            <queries:If>
                                <queries:Call>
                                    <queries:Name value="isChoiceModelGroupRef"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Path initialCapacity="4">
                                    <queries:FeatureStep value="ref"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="allChoiceModelGroupDefSubstitutions"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="contextStack"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:Path>
                            </queries:If>
                            <queries:Do>
                                <queries:VoidLiteral/>
                            </queries:Do>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="mapToDataType"/>
                        <queries:Names initialCapacity="6">
                            <queries:Name value="enumerations"/>
                            <queries:Name value="entityType"/>
                            <queries:Name value="index"/>
                            <queries:Name value="enumValues"/>
                            <queries:Name value="enumValue"/>
                            <queries:Name value="value"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:QueryDeclaration>
                                <queries:Name value="mapsToEnumEntity"/>
                                <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                <queries:Some>
                                    <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:TypeTest value="http://lang.whole.org/Models#EnumEntity"/>
                                    </queries:Filter>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                            </queries:QueryDeclaration>
                            <queries:Choose initialCapacity="2">
                                <queries:Select>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:EnumDataType xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="entityType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <mapping:EnumValues initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#EnumValue"/>
                                        <commons:VarName value="enumValues"/>
                                        <commons:Quantifier value="+"/>
                                        </commons:Variable>
                                        </mapping:EnumValues>
                                        </mapping:EnumDataType>
                                    </commons:StageUpFragment>
                                    <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="mapsToEnumEntity"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:Choose initialCapacity="2">
                                        <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:And initialCapacity="1">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleTypeDef"/>
                                        </queries:And>
                                        </queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#content"/>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:And initialCapacity="1">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Choose>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:VariableTest value="enumerations"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="getAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="name"/>
                                        <queries:VariableTest value="entityType"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Filter>
                                    </queries:Path>
                                    <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:EnumValue xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Value"/>
                                        <commons:VarName value="enumValue"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Value"/>
                                        <commons:VarName value="value"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:EnumValue>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="enumValues"/>
                                        </queries:Filter>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="values"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:IndexVariableTest value="index"/>
                                        <queries:VariableTest value="enumValue"/>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Path initialCapacity="3">
                                        <queries:VariableRefStep value="enumerations"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Enumeration"/>
                                        <queries:IndexVariableTest value="index"/>
                                        </queries:And>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:FeatureStep value="value"/>
                                        <queries:VariableTest value="value"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:TemplateNames/>
                                </queries:Select>
                                <queries:Path initialCapacity="1">
                                    <queries:Call>
                                        <queries:Name value="getCustomDataType"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="findAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:FeatureStep value="name"/>
                                        </queries:Path>
                                        <queries:Call>
                                        <queries:Name value="getBuiltInType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Expressions>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Choose>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="addSubtype"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="subType"/>
                            <queries:Name value="superType"/>
                        </queries:Names>
                        <queries:PointwiseInsert>
                            <queries:Placement value="INTO"/>
                            <queries:Path initialCapacity="4">
                                <queries:VariableRefStep value="model"/>
                                <queries:FeatureStep value="http://lang.whole.org/Models#declarations"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="subType"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:Filter>
                                <queries:Filter>
                                    <queries:FeatureStep value="http://lang.whole.org/Models#types"/>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="superType"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                </queries:Filter>
                            </queries:Path>
                            <queries:VariableRefStep value="superType"/>
                        </queries:PointwiseInsert>
                    </queries:QueryDeclaration>
                    <queries:Select>
                        <queries:Tuple initialCapacity="2">
                            <queries:Filter>
                                <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                    <models:Model xmlns:models="http://lang.whole.org/Models">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#SimpleName"/>
                                        <commons:VarName value="fileName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <models:TypeRelations initialCapacity="0"/>
                                        <models:ModelDeclarations initialCapacity="2">
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#ModelDeclaration"/>
                                        <commons:VarName value="modelDeclarations"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#ModelDeclaration"/>
                                        <commons:VarName value="builtInModelDeclarations"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </models:ModelDeclarations>
                                        <models:Namespace value="org.whole.lang.xsi"/>
                                        <commons:Resolver/>
                                        <commons:Variable>
                                        <commons:VarType value="http://lang.whole.org/Models#URI"/>
                                        <commons:VarName value="languageURI"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                    </models:Model>
                                </commons:StageUpFragment>
                                <queries:VariableTest value="model"/>
                            </queries:Filter>
                            <queries:Filter>
                                <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                    <mapping:MappingStrategy xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="languageURI"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="fileLocationURI"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <mapping:BooleanType value="false"/>
                                        <mapping:BooleanType value="true"/>
                                        <mapping:BooleanType value="false"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <mapping:Mappings initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Mapping"/>
                                        <commons:VarName value="mappings"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </mapping:Mappings>
                                        <mapping:DataTypes initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#DataType"/>
                                        <commons:VarName value="customDataTypes"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </mapping:DataTypes>
                                    </mapping:MappingStrategy>
                                </commons:StageUpFragment>
                                <queries:VariableTest value="mappingStrategy"/>
                            </queries:Filter>
                        </queries:Tuple>
                        <queries:SelfStep/>
                        <queries:Sequence initialCapacity="4">
                            <queries:Filter>
                                <queries:Choose initialCapacity="2">
                                    <queries:If>
                                        <queries:Not>
                                        <queries:Equals>
                                        <queries:VariableRefStep value="TARGET_NS_URI"/>
                                        <queries:StringLiteral value=""/>
                                        </queries:Equals>
                                        </queries:Not>
                                        <queries:VariableRefStep value="TARGET_NS_URI"/>
                                    </queries:If>
                                    <queries:Do>
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <workflows:Sequence xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="sequence"/>
                                        <workflows:FlowObjects initialCapacity="1">
                                        <workflows:InvokeJavaClassMethod>
                                        <workflows:Text value="calculate internal namespace"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.util.NamespaceUtils"/>
                                        <workflows:StringLiteral value="calculateInternalNamespace(boolean)"/>
                                        <commons:Resolver/>
                                        </workflows:InvokeJavaClassMethod>
                                        </workflows:FlowObjects>
                                        </workflows:Sequence>
                                        </commons:SameStageFragment>
                                    </queries:Do>
                                </queries:Choose>
                                <queries:VariableTest value="languageURI"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="3">
                                <queries:FeatureStep value="components"/>
                                <queries:ChildStep/>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="mapToMapping"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="mappings"/>
                                    </queries:Filter>
                                    <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="mapToModelDeclaration"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:VariableTest value="modelDeclarations"/>
                                    </queries:Filter>
                                </queries:Sequence>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:VariableRefStep value="mappedBuiltInTypes"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:VariableTest value="builtInModelDeclarations"/>
                                </queries:Filter>
                            </queries:Path>
                            <queries:Path initialCapacity="2">
                                <queries:VariableRefStep value="mappedCustomDataTypes"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:VariableTest value="customDataTypes"/>
                                </queries:Filter>
                            </queries:Path>
                        </queries:Sequence>
                        <queries:TemplateNames/>
                    </queries:Select>
                    <queries:Path initialCapacity="2">
                        <queries:Filter>
                            <queries:DescendantStep/>
                            <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#Choice"/>
                        </queries:Filter>
                        <queries:Block initialCapacity="2">
                            <queries:Filter>
                                <queries:Choose initialCapacity="2">
                                    <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Path initialCapacity="2">
                                        <queries:ParentStep/>
                                        <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:Choose>
                                <queries:VariableTest value="sType"/>
                            </queries:Filter>
                            <queries:Path initialCapacity="3">
                                <queries:Call>
                                    <queries:Name value="getChildParticles"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="findAppInfoType"/>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="addSubtype"/>
                                    <queries:Expressions initialCapacity="2">
                                        <queries:SelfStep/>
                                        <queries:VariableRefStep value="sType"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:Path>
                        </queries:Block>
                    </queries:Path>
                    <queries:Path initialCapacity="2">
                        <queries:Filter>
                            <queries:DescendantStep/>
                            <queries:Or initialCapacity="2">
                                <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#ComplexDerivation"/>
                                <queries:And initialCapacity="3">
                                    <queries:SubtypeTest value="http://www.w3.org/2001/XMLSchema#SimpleDerivation"/>
                                    <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isSchemaQName"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Not>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                    <queries:Not>
                                        <queries:Some>
                                        <queries:Path initialCapacity="3">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                        <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="findAppInfo"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        <queries:Or initialCapacity="2">
                                        <queries:TypeTest value="http://lang.whole.org/Models#DataEntity"/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#EnumEntity"/>
                                        </queries:Or>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                    </queries:Not>
                                </queries:And>
                            </queries:Or>
                        </queries:Filter>
                        <queries:Call>
                            <queries:Name value="addSubtype"/>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="3">
                                    <queries:ParentStep/>
                                    <queries:ParentStep/>
                                    <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Path initialCapacity="3">
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                    <queries:Call>
                                        <queries:Name value="getComponent"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                    <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:Path>
                    <queries:Path initialCapacity="2">
                        <queries:Filter>
                            <queries:DescendantStep/>
                            <queries:And initialCapacity="2">
                                <queries:TypeTest value="http://www.w3.org/2001/XMLSchema#SimpleRestriction"/>
                                <queries:Not>
                                    <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#facets"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:Not>
                            </queries:And>
                        </queries:Filter>
                        <queries:Call>
                            <queries:Name value="cloneMappings"/>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="3">
                                    <queries:ParentStep/>
                                    <queries:ParentStep/>
                                    <queries:Call>
                                        <queries:Name value="findAppInfoType"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Call>
                                </queries:Path>
                                <queries:Path initialCapacity="1">
                                    <queries:FeatureStep value="http://www.w3.org/2001/XMLSchema#base"/>
                                </queries:Path>
                            </queries:Expressions>
                        </queries:Call>
                    </queries:Path>
                    <queries:Tuple initialCapacity="2">
                        <queries:VariableRefStep value="model"/>
                        <queries:VariableRefStep value="mappingStrategy"/>
                    </queries:Tuple>
                </queries:Block>
            </queries:Scope>
        </semantics:SemanticFunction>
        <semantics:SemanticFunction>
            <semantics:Name value="modelToXmlSchema"/>
            <semantics:FunctionType>
                <semantics:AnyType/>
                <semantics:AnyType/>
            </semantics:FunctionType>
            <queries:Scope xmlns:queries="http://lang.whole.org/Queries">
                <queries:ScopeNames initialCapacity="0"/>
                <queries:Block initialCapacity="22">
                    <workflows:InvokeOperation xmlns:workflows="http://lang.whole.org/Workflows">
                        <workflows:Text value="normalize model"/>
                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                            <queries:SelfStep/>
                        </commons:SameStageFragment>
                        <workflows:Operation value="NORMALIZER"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                    </workflows:InvokeOperation>
                    <queries:Filter>
                        <queries:StringLiteral value="xsd"/>
                        <queries:VariableTest value="XML_SCHEMA_NS_PREFIX"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:FeatureStep value="http://lang.whole.org/Models#declarations"/>
                        <queries:VariableTest value="allDeclarations"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Union>
                            <queries:Expressions initialCapacity="1">
                                <queries:Path initialCapacity="3">
                                    <queries:VariableRefStep value="allDeclarations"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:Not>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#modifiers"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:EntityModifier xmlns:models="http://lang.whole.org/Models" value="abstract"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Not>
                                    </queries:Filter>
                                    <queries:FeatureStep value="name"/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Union>
                        <queries:VariableTest value="allConcreteTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Union>
                            <queries:Expressions initialCapacity="1">
                                <queries:Path initialCapacity="4">
                                    <queries:VariableRefStep value="allDeclarations"/>
                                    <queries:ChildStep/>
                                    <queries:FeatureStep value="http://lang.whole.org/Models#types"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Union>
                        <queries:VariableTest value="allSuperTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Except>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="3">
                                    <queries:VariableRefStep value="allDeclarations"/>
                                    <queries:ChildStep/>
                                    <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allConcreteTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Except>
                        <queries:VariableTest value="allDeclaredAbstractTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Except>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="3">
                                    <queries:VariableRefStep value="allDeclarations"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:TypeTest value="http://lang.whole.org/Models#SimpleEntity"/>
                                        <queries:Not>
                                        <queries:Some>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#features"/>
                                        <queries:ChildStep/>
                                        </queries:Path>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:Not>
                                        </queries:And>
                                    </queries:Filter>
                                    <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allConcreteTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Except>
                        <queries:VariableTest value="allDeclaredMarkerTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Except>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allSuperTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allConcreteTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Except>
                        <queries:VariableTest value="allImplicitMarkerTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Union>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allDeclaredMarkerTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allImplicitMarkerTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Union>
                        <queries:VariableTest value="allMarkerTypes"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:Union>
                            <queries:Expressions initialCapacity="2">
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allDeclaredAbstractTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allMarkerTypes"/>
                                    <queries:ChildStep/>
                                </queries:Path>
                            </queries:Expressions>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Union>
                        <queries:VariableTest value="allAbstractTypes"/>
                    </queries:Filter>
                    <queries:QueryDeclaration>
                        <queries:Name value="isOptional"/>
                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        <queries:Choose initialCapacity="2">
                            <queries:If>
                                <queries:Some>
                                    <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#modifiers"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:MatchTest>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <models:FeatureModifier xmlns:models="http://lang.whole.org/Models" value="optional"/>
                                        </commons:StageUpFragment>
                                        </queries:MatchTest>
                                        </queries:Filter>
                                    </queries:Path>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                                <queries:BooleanLiteral value="true"/>
                            </queries:If>
                            <queries:Do>
                                <queries:BooleanLiteral value="false"/>
                            </queries:Do>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="isAbstract"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="entityName"/>
                        </queries:Names>
                        <queries:Some>
                            <queries:Path initialCapacity="2">
                                <queries:VariableRefStep value="allAbstractTypes"/>
                                <queries:Filter>
                                    <queries:ChildStep/>
                                    <queries:VariableTest value="entityName"/>
                                </queries:Filter>
                            </queries:Path>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                        </queries:Some>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="allSubTypes"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="entityName"/>
                            <queries:Name value="subTypeName"/>
                        </queries:Names>
                        <queries:Path initialCapacity="3">
                            <queries:VariableRefStep value="allDeclarations"/>
                            <queries:Filter>
                                <queries:ChildStep/>
                                <queries:Some>
                                    <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#types"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="entityName"/>
                                        </queries:Filter>
                                    </queries:Path>
                                    <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                </queries:Some>
                            </queries:Filter>
                            <queries:Filter>
                                <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                <queries:VariableTest value="subTypeName"/>
                            </queries:Filter>
                        </queries:Path>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="allImplementations"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="entityName"/>
                        </queries:Names>
                        <queries:Filter>
                            <queries:Choose initialCapacity="2">
                                <queries:If>
                                    <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="entityName"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                    <queries:Path initialCapacity="2">
                                        <queries:Call>
                                        <queries:Name value="allSubTypes"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="entityName"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="allImplementations"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:SelfStep/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Path>
                                </queries:If>
                                <queries:VariableRefStep value="entityName"/>
                            </queries:Choose>
                            <queries:KindTest value="DATA"/>
                        </queries:Filter>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="toElementName"/>
                        <queries:Names initialCapacity="1">
                            <queries:Name value="entityName"/>
                        </queries:Names>
                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                            <workflows:Text value="calculate element name"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                            <workflows:StringLiteral value="org.whole.lang.util.StringUtils"/>
                            <workflows:StringLiteral value="toLowerCap(java.lang.String)"/>
                            <workflows:Expressions initialCapacity="1">
                                <workflows:Variable value="entityName"/>
                            </workflows:Expressions>
                        </workflows:InvokeJavaClassMethod>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="createElementRef"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="entityName"/>
                            <queries:Name value="isOptional"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:Filter>
                                <queries:BooleanLiteral value="false"/>
                                <queries:VariableTest value="isOptional"/>
                            </queries:Filter>
                            <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                <xsd:ElementRef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                    <xsd:NamespaceDecls initialCapacity="0"/>
                                    <commons:Resolver/>
                                    <xsd:Attributes initialCapacity="0"/>
                                    <commons:StageDownFragment>
                                        <queries:If>
                                        <queries:VariableRefStep value="isOptional"/>
                                        <commons:StageUpFragment>
                                        <xsd:Bounded value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:If>
                                    </commons:StageDownFragment>
                                    <commons:Resolver/>
                                    <commons:StageDownFragment>
                                        <queries:Call>
                                        <queries:Name value="toElementName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="entityName"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </commons:StageDownFragment>
                                    <commons:Resolver/>
                                </xsd:ElementRef>
                            </commons:StageUpFragment>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="createModelGroupRef"/>
                        <queries:Names initialCapacity="2">
                            <queries:Name value="entityName"/>
                            <queries:Name value="isOptional"/>
                        </queries:Names>
                        <queries:Block initialCapacity="2">
                            <queries:Filter>
                                <queries:BooleanLiteral value="false"/>
                                <queries:VariableTest value="isOptional"/>
                            </queries:Filter>
                            <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                <xsd:ModelGroupRef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                    <xsd:NamespaceDecls initialCapacity="0"/>
                                    <commons:Resolver/>
                                    <xsd:Attributes initialCapacity="0"/>
                                    <commons:StageDownFragment>
                                        <queries:If>
                                        <queries:VariableRefStep value="isOptional"/>
                                        <commons:StageUpFragment>
                                        <xsd:Bounded value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:If>
                                    </commons:StageDownFragment>
                                    <commons:Resolver/>
                                    <commons:StageDownFragment>
                                        <queries:VariableRefStep value="entityName"/>
                                    </commons:StageDownFragment>
                                    <commons:Resolver/>
                                </xsd:ModelGroupRef>
                            </commons:StageUpFragment>
                        </queries:Block>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="createElemenMapping"/>
                        <queries:Names initialCapacity="4">
                            <queries:Name value="context"/>
                            <queries:Name value="name"/>
                            <queries:Name value="type"/>
                            <queries:Name value="feature"/>
                        </queries:Names>
                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                            <mapping:ElementMapping xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                <commons:Variable>
                                    <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                    <commons:VarName value="context"/>
                                    <commons:Quantifier value="!"/>
                                </commons:Variable>
                                <commons:Variable>
                                    <commons:VarType value="http://xsd.lang.whole.org/Mapping#NCName"/>
                                    <commons:VarName value="name"/>
                                    <commons:Quantifier value="!"/>
                                </commons:Variable>
                                <commons:Variable>
                                    <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                    <commons:VarName value="type"/>
                                    <commons:Quantifier value="!"/>
                                </commons:Variable>
                                <commons:StageDownFragment>
                                    <queries:Path initialCapacity="1">
                                        <queries:VariableRefStep value="feature"/>
                                    </queries:Path>
                                </commons:StageDownFragment>
                            </mapping:ElementMapping>
                        </commons:StageUpFragment>
                    </queries:QueryDeclaration>
                    <queries:QueryDeclaration>
                        <queries:Name value="createElemenMappings"/>
                        <queries:Names initialCapacity="3">
                            <queries:Name value="context"/>
                            <queries:Name value="type"/>
                            <queries:Name value="feature"/>
                        </queries:Names>
                        <queries:Choose initialCapacity="2">
                            <queries:If>
                                <queries:And initialCapacity="2">
                                    <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="type"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                    </queries:Not>
                                    <queries:Some>
                                        <queries:VariableRefStep value="feature"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                    </queries:Some>
                                </queries:And>
                                <queries:Call>
                                    <queries:Name value="createElemenMapping"/>
                                    <queries:Expressions initialCapacity="4">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:VariableRefStep value="feature"/>
                                        <queries:VariableRefStep value="type"/>
                                        <queries:VariableRefStep value="feature"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:If>
                            <queries:For>
                                <queries:Call>
                                    <queries:Name value="allImplementations"/>
                                    <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="type"/>
                                    </queries:Expressions>
                                </queries:Call>
                                <queries:Call>
                                    <queries:Name value="createElemenMapping"/>
                                    <queries:Expressions initialCapacity="4">
                                        <queries:VariableRefStep value="context"/>
                                        <queries:Call>
                                        <queries:Name value="toElementName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:SelfStep/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:SelfStep/>
                                        <queries:VariableRefStep value="feature"/>
                                    </queries:Expressions>
                                </queries:Call>
                            </queries:For>
                        </queries:Choose>
                    </queries:QueryDeclaration>
                    <queries:Filter>
                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                        <queries:VariableTest value="modelName"/>
                    </queries:Filter>
                    <queries:Filter>
                        <queries:FeatureStep value="http://lang.whole.org/Models#uri"/>
                        <queries:VariableTest value="languageURI"/>
                    </queries:Filter>
                    <queries:Select>
                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                            <misc:Misc xmlns:misc="http://lang.whole.org/Misc" initialCapacity="2">
                                <xsd:Schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                    <xsd:NamespaceDecls initialCapacity="2">
                                        <xsd:NamespaceDecl>
                                        <commons:Resolver/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#AnyURI"/>
                                        <commons:VarName value="languageURI"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </xsd:NamespaceDecl>
                                        <xsd:NamespaceDecl>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="XML_SCHEMA_NS_PREFIX"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <xsd:AnyURI value="http://www.w3.org/2001/XMLSchema"/>
                                        </xsd:NamespaceDecl>
                                    </xsd:NamespaceDecls>
                                    <commons:Resolver/>
                                    <xsd:Attributes initialCapacity="0"/>
                                    <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#AnyURI"/>
                                        <commons:VarName value="languageURI"/>
                                        <commons:Quantifier value="!"/>
                                    </commons:Variable>
                                    <commons:Resolver/>
                                    <commons:Resolver/>
                                    <commons:Resolver/>
                                    <xsd:Qualify value="qualified"/>
                                    <commons:Resolver/>
                                    <commons:Resolver/>
                                    <xsd:SchemaDirectives initialCapacity="0"/>
                                    <xsd:SchemaComponents initialCapacity="2">
                                        <commons:InlineVariable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#SchemaComponent"/>
                                        <commons:VarName value="elementDecl"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:InlineVariable>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#SchemaComponent"/>
                                        <commons:VarName value="modelGroupDef"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                    </xsd:SchemaComponents>
                                </xsd:Schema>
                                <mapping:MappingStrategy xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                    <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="languageURI"/>
                                        <commons:Quantifier value="!"/>
                                    </commons:Variable>
                                    <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="schemaLocation"/>
                                        <commons:Quantifier value="!"/>
                                    </commons:Variable>
                                    <mapping:BooleanType value="true"/>
                                    <mapping:BooleanType value="true"/>
                                    <mapping:BooleanType value="false"/>
                                    <commons:Resolver/>
                                    <commons:Resolver/>
                                    <mapping:Mappings initialCapacity="1">
                                        <commons:InlineVariable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Mapping"/>
                                        <commons:VarName value="mappings"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:InlineVariable>
                                    </mapping:Mappings>
                                    <mapping:DataTypes initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#DataType"/>
                                        <commons:VarName value="dataType"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                    </mapping:DataTypes>
                                </mapping:MappingStrategy>
                            </misc:Misc>
                        </commons:StageUpFragment>
                        <queries:SelfStep/>
                        <queries:Sequence initialCapacity="5">
                            <queries:Filter>
                                <queries:Addition>
                                    <queries:VariableRefStep value="modelName"/>
                                    <queries:StringLiteral value=".xsd"/>
                                </queries:Addition>
                                <queries:VariableTest value="schemaLocation"/>
                            </queries:Filter>
                            <queries:Select>
                                <queries:Filter>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:Mappings xmlns:mapping="http://xsd.lang.whole.org/Mapping" initialCapacity="2">
                                        <mapping:RootMapping>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#NCName"/>
                                        <commons:VarName value="elementName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:RootMapping>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Mapping"/>
                                        <commons:VarName value="childMapping"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </mapping:Mappings>
                                    </commons:StageUpFragment>
                                    <queries:VariableTest value="mappings"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="2">
                                    <queries:FeatureStep value="http://lang.whole.org/Models#declarations"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="toElementName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="name"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:VariableTest value="elementName"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Choose initialCapacity="2">
                                    <queries:Path initialCapacity="2">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#CompositeEntity"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="createElemenMappings"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="name"/>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#componentType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:VariableTest value="childMapping"/>
                                        </queries:Filter>
                                    </queries:Path>
                                    <queries:Path initialCapacity="4">
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#SimpleEntity"/>
                                        </queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#features"/>
                                        <queries:ChildStep/>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="createElemenMappings"/>
                                        <queries:Expressions initialCapacity="3">
                                        <queries:VariableRefStep value="name"/>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#type"/>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:VariableTest value="childMapping"/>
                                        </queries:Filter>
                                    </queries:Path>
                                </queries:Choose>
                                <queries:TemplateNames/>
                            </queries:Select>
                            <queries:Select>
                                <queries:Filter>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:EnumDataType xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#URI"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <mapping:EnumValues initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#EnumValue"/>
                                        <commons:VarName value="enumValue"/>
                                        <commons:Quantifier value="+"/>
                                        </commons:Variable>
                                        </mapping:EnumValues>
                                        </mapping:EnumDataType>
                                    </commons:StageUpFragment>
                                    <queries:VariableTest value="dataType"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="2">
                                    <queries:FeatureStep value="http://lang.whole.org/Models#declarations"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#EnumEntity"/>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Sequence initialCapacity="2">
                                    <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="name"/>
                                    </queries:Filter>
                                    <queries:Path initialCapacity="3">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#values"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="value"/>
                                        </queries:Filter>
                                        <queries:Sequence initialCapacity="1">
                                        <queries:Do>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <mapping:EnumValue xmlns:mapping="http://xsd.lang.whole.org/Mapping">
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Value"/>
                                        <commons:VarName value="value"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Variable>
                                        <commons:VarType value="http://xsd.lang.whole.org/Mapping#Value"/>
                                        <commons:VarName value="value"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </mapping:EnumValue>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="enumValue"/>
                                        </queries:Filter>
                                        </queries:Do>
                                        </queries:Sequence>
                                    </queries:Path>
                                </queries:Sequence>
                                <queries:TemplateNames/>
                            </queries:Select>
                            <queries:Select>
                                <queries:Filter>
                                    <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:SchemaComponents xmlns:xsd="http://www.w3.org/2001/XMLSchema" initialCapacity="2">
                                        <xsd:ElementDecl>
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="elementName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#QName"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        </xsd:ElementDecl>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#TypeDef"/>
                                        <commons:VarName value="typeDef"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </xsd:SchemaComponents>
                                    </commons:StageUpFragment>
                                    <queries:VariableTest value="elementDecl"/>
                                </queries:Filter>
                                <queries:Path initialCapacity="2">
                                    <queries:FeatureStep value="http://lang.whole.org/Models#declarations"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Not>
                                        <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="name"/>
                                        </queries:Filter>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Not>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:Call>
                                        <queries:Name value="toElementName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="name"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:VariableTest value="elementName"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:Choose initialCapacity="4">
                                    <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:ComplexTypeDef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:DeclaredContent>
                                        <xsd:Sequence>
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <xsd:Bounded value="0"/>
                                        <xsd:Unbounded/>
                                        <commons:Resolver/>
                                        <xsd:Particles initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Particle"/>
                                        <commons:VarName value="particle"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        </xsd:Particles>
                                        </xsd:Sequence>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        </xsd:DeclaredContent>
                                        </xsd:ComplexTypeDef>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="typeDef"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#CompositeEntity"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#componentType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="createModelGroupRef"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#componentType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:Call>
                                        <queries:Name value="createElementRef"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#componentType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="particle"/>
                                        </queries:Filter>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:ComplexTypeDef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:DeclaredContent>
                                        <xsd:Sequence>
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:Particles initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Particle"/>
                                        <commons:VarName value="particle"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </xsd:Particles>
                                        </xsd:Sequence>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        </xsd:DeclaredContent>
                                        </xsd:ComplexTypeDef>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="typeDef"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#SimpleEntity"/>
                                        </queries:Filter>
                                        <queries:For>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#features"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:And initialCapacity="2">
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#name"/>
                                        <queries:VariableTest value="featureName"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        <queries:Some>
                                        <queries:Filter>
                                        <queries:FeatureStep value="http://lang.whole.org/Models#type"/>
                                        <queries:VariableTest value="featureType"/>
                                        </queries:Filter>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Some>
                                        </queries:And>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Filter>
                                        <queries:Choose initialCapacity="3">
                                        <queries:If>
                                        <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="featureType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="createModelGroupRef"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="featureType"/>
                                        <queries:Call>
                                        <queries:Name value="isOptional"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:If>
                                        <queries:If>
                                        <queries:Equals>
                                        <queries:VariableRefStep value="featureName"/>
                                        <queries:Call>
                                        <queries:Name value="toElementName"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="featureType"/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Equals>
                                        <queries:Call>
                                        <queries:Name value="createElementRef"/>
                                        <queries:Expressions initialCapacity="2">
                                        <queries:VariableRefStep value="featureName"/>
                                        <queries:Call>
                                        <queries:Name value="isOptional"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        </queries:Call>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:If>
                                        <queries:Do>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:ElementDecl xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="featureName"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:StageDownFragment>
                                        <queries:If>
                                        <queries:Call>
                                        <queries:Name value="isOptional"/>
                                        <commons:Resolver/>
                                        </queries:Call>
                                        <commons:StageUpFragment>
                                        <xsd:Bounded value="0"/>
                                        </commons:StageUpFragment>
                                        </queries:If>
                                        </commons:StageDownFragment>
                                        <commons:Resolver/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#QName"/>
                                        <commons:VarName value="featureType"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        </xsd:ElementDecl>
                                        </commons:StageUpFragment>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="particle"/>
                                        </queries:Filter>
                                        </queries:For>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:SimpleTypeDef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:SimpleTypeRestriction>
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#QName"/>
                                        <commons:VarName value="builtInType"/>
                                        <commons:Quantifier value="?"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:Facets initialCapacity="0"/>
                                        </xsd:SimpleTypeRestriction>
                                        </xsd:SimpleTypeDef>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="typeDef"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#DataEntity"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="has built in type?"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="hasBuiltInType(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#dataType"/>
                                        </commons:SameStageFragment>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="XML_SCHEMA_NS_PREFIX"/>
                                        <queries:Addition>
                                        <queries:StringLiteral value=":"/>
                                        <workflows:InvokeJavaClassMethod xmlns:workflows="http://lang.whole.org/Workflows">
                                        <workflows:Text value="get built in type"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <commons:Resolver xmlns:commons="http://lang.whole.org/Commons"/>
                                        <workflows:StringLiteral value="org.whole.lang.xsd.parsers.SchemaDataTypes"/>
                                        <workflows:StringLiteral value="getBuiltInType(java.lang.String)"/>
                                        <workflows:Expressions initialCapacity="1">
                                        <commons:SameStageFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#dataType"/>
                                        </commons:SameStageFragment>
                                        </workflows:Expressions>
                                        </workflows:InvokeJavaClassMethod>
                                        </queries:Addition>
                                        </queries:Addition>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:StringLiteral value="anySimpleType"/>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="builtInType"/>
                                        </queries:Filter>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                    <queries:Select>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:SimpleTypeDef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:SimpleTypeRestriction>
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:StageDownFragment>
                                        <queries:Addition>
                                        <queries:VariableRefStep value="XML_SCHEMA_NS_PREFIX"/>
                                        <queries:StringLiteral value=":string"/>
                                        </queries:Addition>
                                        </commons:StageDownFragment>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:Facets initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Facet"/>
                                        <commons:VarName value="enum"/>
                                        <commons:Quantifier value="+"/>
                                        </commons:Variable>
                                        </xsd:Facets>
                                        </xsd:SimpleTypeRestriction>
                                        </xsd:SimpleTypeDef>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="typeDef"/>
                                        </queries:Filter>
                                        <queries:Filter>
                                        <queries:SelfStep/>
                                        <queries:TypeTest value="http://lang.whole.org/Models#EnumEntity"/>
                                        </queries:Filter>
                                        <queries:For>
                                        <queries:Path initialCapacity="2">
                                        <queries:FeatureStep value="http://lang.whole.org/Models#values"/>
                                        <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="value"/>
                                        </queries:Filter>
                                        </queries:Path>
                                        <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:Enumeration xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#StringData"/>
                                        <commons:VarName value="value"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        </xsd:Enumeration>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="enum"/>
                                        </queries:Filter>
                                        </queries:For>
                                        <queries:TemplateNames/>
                                    </queries:Select>
                                </queries:Choose>
                                <queries:TemplateNames/>
                            </queries:Select>
                            <queries:Select>
                                <queries:Tuple initialCapacity="1">
                                    <queries:Filter>
                                        <commons:StageUpFragment xmlns:commons="http://lang.whole.org/Commons">
                                        <xsd:ModelGroupDef xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Name"/>
                                        <commons:VarName value="name"/>
                                        <commons:Quantifier value="!"/>
                                        </commons:Variable>
                                        <commons:Resolver/>
                                        <xsd:Choice>
                                        <xsd:NamespaceDecls initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <xsd:Attributes initialCapacity="0"/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <commons:Resolver/>
                                        <xsd:Particles initialCapacity="1">
                                        <commons:Variable>
                                        <commons:VarType value="http://www.w3.org/2001/XMLSchema#Particle"/>
                                        <commons:VarName value="particle"/>
                                        <commons:Quantifier value="*"/>
                                        </commons:Variable>
                                        </xsd:Particles>
                                        </xsd:Choice>
                                        </xsd:ModelGroupDef>
                                        </commons:StageUpFragment>
                                        <queries:VariableTest value="modelGroupDef"/>
                                    </queries:Filter>
                                </queries:Tuple>
                                <queries:Path initialCapacity="2">
                                    <queries:VariableRefStep value="allAbstractTypes"/>
                                    <queries:Filter>
                                        <queries:ChildStep/>
                                        <queries:VariableTest value="name"/>
                                    </queries:Filter>
                                </queries:Path>
                                <queries:For>
                                    <queries:Call>
                                        <queries:Name value="allSubTypes"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:VariableRefStep value="name"/>
                                        </queries:Expressions>
                                    </queries:Call>
                                    <queries:Filter>
                                        <queries:Choose initialCapacity="2">
                                        <queries:If>
                                        <queries:Call>
                                        <queries:Name value="isAbstract"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:SelfStep/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        <queries:Call>
                                        <queries:Name value="createModelGroupRef"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:SelfStep/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:If>
                                        <queries:Do>
                                        <queries:Call>
                                        <queries:Name value="createElementRef"/>
                                        <queries:Expressions initialCapacity="1">
                                        <queries:SelfStep/>
                                        </queries:Expressions>
                                        </queries:Call>
                                        </queries:Do>
                                        </queries:Choose>
                                        <queries:VariableTest value="particle"/>
                                    </queries:Filter>
                                </queries:For>
                                <queries:TemplateNames/>
                            </queries:Select>
                        </queries:Sequence>
                        <queries:TemplateNames/>
                    </queries:Select>
                </queries:Block>
            </queries:Scope>
        </semantics:SemanticFunction>
    </semantics:SemanticFunctions>
</semantics:SemanticTheory>
